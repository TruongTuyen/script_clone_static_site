var pageHome = "homepage";
var pageSearch = "search";
var pageSPlayer = "song_player";
var pageAPlayer = "album_player";
var pageVPlayer = "video_player";
var pageTopic = "topic";
var pageCharts = "charts";
var pageChartsSong = "charts_song";
var pageChartsVideo = "charts_video";
var pageChartsAlbum = "charts_album";
var pageGenreAlbum = "genre_album";
var pageGenreVideo = "genre_video";
var pageGenreArtist = "genre_artist";


var arrGroupTop = new Array();
arrGroupTop[pageHome] = "418824812978717219";// HOME
arrGroupTop[pageSearch] = "986781405482009125"; // SEARCH
//arrGroupTop[pageSPlayer] = "1887310771847126167"; // Player
//arrGroupTop[pageAPlayer] = "624417626058611882";  // Album
//arrGroupTop[pageVPlayer] = "1836793727288827009";  // Video Player
//arrGroupTop[pageTopic] = "624417626058611882";// Album
//arrGroupTop[pageCharts] = "2353725214962441405";   // BXH
//arrGroupTop[pageChartsSong] = "2353725214962441405";  // BHX
//arrGroupTop[pageChartsVideo] = "2353725214962441405"; // BXH
//arrGroupTop[pageChartsAlbum] = "2353725214962441405"; // BXH
//arrGroupTop[pageGenreAlbum] = "624417626058611882";// Album
//arrGroupTop[pageGenreVideo] = "1836793727288827009"; // Video Player
//arrGroupTop[pageGenreArtist] = "624417626058611882";// Album
var arrGroupCenter = new Array();
arrGroupCenter[pageHome] = "1343978386492972270";// HOME
arrGroupCenter[pageSearch] = "2430018754855787676"; // SEARCH
arrGroupCenter[pageSPlayer] = "1887310771847126167"; // Player
arrGroupCenter[pageAPlayer] = "624417626058611882";  // Album
arrGroupCenter[pageVPlayer] = "1836793727288827009";  // Video Player
arrGroupCenter[pageTopic] = "624417626058611882";// Album
arrGroupCenter[pageCharts] = "2353725214962441405";   // BXH
arrGroupCenter[pageChartsSong] = "2353725214962441405";  // BHX
arrGroupCenter[pageChartsVideo] = "2353725214962441405"; // BXH
arrGroupCenter[pageChartsAlbum] = "2353725214962441405"; // BXH
arrGroupCenter[pageGenreAlbum] = "624417626058611882";// Album
arrGroupCenter[pageGenreVideo] = "1836793727288827009"; // Video Player
arrGroupCenter[pageGenreArtist] = "624417626058611882";// Album
var arrGroupRight1 = new Array();
arrGroupRight1[pageHome] = "775969034611416300";
arrGroupRight1[pageSearch] = "1862062179532364954";
arrGroupRight1[pageSPlayer] = "1319275014506634389";
arrGroupRight1[pageAPlayer] = "2303199236872166487";
arrGroupRight1[pageVPlayer] = "700799126882180237";
arrGroupRight1[pageTopic] = "2303199236872166487";
arrGroupRight1[pageGenreAlbum] = "2303199236872166487";
arrGroupRight1[pageGenreVideo] = "700799126882180237";
arrGroupRight1[pageGenreArtist] = "2303199236872166487";
arrGroupRight1[pageChartsSong] = "1217721887182249145";
arrGroupRight1[pageChartsVideo] = "1217721887182249145";
arrGroupRight1[pageChartsAlbum] = "1217721887182249145";
var arrGroupRight2 = new Array();
arrGroupRight2[pageHome] = "208001378272369898";
arrGroupRight2[pageSearch] = "1294024223168617624";
arrGroupRight2[pageSPlayer] = "751316240159956115";
arrGroupRight2[pageAPlayer] = "1167204773904473171";
arrGroupRight2[pageVPlayer] = "2379536757230623926";
arrGroupRight2[pageTopic] = "1167204773904473171";
arrGroupRight2[pageChartsSong] = "81674578936945829";
arrGroupRight2[pageChartsAlbum] = "81674578936945829";
arrGroupRight2[pageGenreAlbum] = "1167204773904473171";
arrGroupRight2[pageGenreVideo] = "2379536757230623926";
arrGroupRight2[pageGenreArtist] = "1167204773904473171";
var arrGroupRight3 = new Array();
arrGroupRight3[pageHome] = "2474525306215942336";
arrGroupRight3[pageSearch] = "158020895388425348"; // 25 - Feb - 2015 : Add lai vo R3 - Remove roi
arrGroupRight3[pageSPlayer] = "183280482819464337";
arrGroupRight3[pageAPlayer] = "31192650031258719";
arrGroupRight3[pageVPlayer] = "675532873661897904";
arrGroupRight3[pageTopic] = "31192650031258719";
arrGroupRight3[pageChartsSong] = "1760429749931826350";
arrGroupRight3[pageChartsAlbum] = "1760429749931826350";
arrGroupRight3[pageGenreArtist] = "31192650031258719";
arrGroupRight3[pageGenreAlbum] = "31192650031258719";
arrGroupRight3[pageGenreVideo] = "675532873661897904";
var arrGroupBalloon = new Array();
arrGroupBalloon[pageHome] = "2783674213208644454";
arrGroupBalloon[pageSearch] = "2240895449138944881"; // Remove roi
arrGroupBalloon[pageSPlayer] = "1672937138648734591";
arrGroupBalloon[pageAPlayer] = "536889830403431291";
arrGroupBalloon[pageVPlayer] = "2808939985392589683";
arrGroupBalloon[pageTopic] = "536889830403431291";
arrGroupBalloon[pageCharts] = "1104901398488111997";   // BXH
arrGroupBalloon[pageChartsSong] = "1104901398488111997";
arrGroupBalloon[pageChartsAlbum] = "1104901398488111997";
arrGroupBalloon[pageGenreArtist] = "536889830403431291";
arrGroupBalloon[pageGenreAlbum] = "536889830403431291";
arrGroupBalloon[pageGenreVideo] = "1672937138648734591";
var arrGroupFooterPopup = new Array();
arrGroupFooterPopup[pageCharts] = 978; // Remove roi
arrGroupFooterPopup[pageChartsSong] = 978; // Remove roi
arrGroupFooterPopup[pageChartsVideo] = 978; // Remove roi
arrGroupFooterPopup[pageChartsAlbum] = 978; // Remove roi

var arrGroupBillboard = new Array();
arrGroupBillboard[pageHome] = "1135849910620867211";
arrGroupBillboard[pageSearch] = "593071610407635586";
arrGroupBillboard[pageSPlayer] = "2271826850121992847";
arrGroupBillboard[pageAPlayer] = "1703861461525678733";
arrGroupBillboard[pageVPlayer] = "25106238991190656";

var arrGroupLeft = new Array();
arrGroupLeft[pageHome] = "1345198277464119963";

var arrGroupRight = new Array();
arrGroupRight[pageHome] = "1913207646525545117";

var arrGroupBgLeft = new Array();
arrGroupBgLeft[pageHome] = "1678601736655686320";
arrGroupBgLeft[pageSearch] = "1529005603374449194";
arrGroupBgLeft[pageVPlayer] = "1272568636732035073";
arrGroupBgLeft[pageSPlayer] = "1665028252725890458";
arrGroupBgLeft[pageAPlayer] = "2814605064435878580";

var arrGroupBgRight = new Array();
arrGroupBgRight[pageHome] = "2246560528182233778";
arrGroupBgRight[pageSearch] = "2097527276134941228";
arrGroupBgRight[pageVPlayer] = "1839982001771728899";
arrGroupBgRight[pageSPlayer] = "1096992495385398680";
arrGroupBgRight[pageAPlayer] = "567822880653920905";

var arrGroupComment = new Array();
arrGroupComment[pageAPlayer] = "301766067736759070";
arrGroupComment[pageSPlayer] = "1438323549377350418";
arrGroupComment[pageVPlayer] = "2561449469987473926";

var arrGroupHalfPage = new Array();
arrGroupHalfPage[pageHome] = "264822575827732526";
arrGroupHalfPage[pageSearch] = "1400817107514902562";
arrGroupHalfPage[pageSPlayer] = "832779168331024416";
arrGroupHalfPage[pageAPlayer] = "2536820435295094822";
arrGroupHalfPage[pageTopic] = "2536820435295094822";
arrGroupHalfPage[pageVPlayer] = "1968791292204238884";
arrGroupHalfPage[pageCharts] = "290035983770404923";   // BXH

var arrGroupFullBackgroound = new Array();
arrGroupFullBackgroound['Top100'] = "1906557718596372686";
arrGroupFullBackgroound[pageChartsSong] = "1338548366714816716";
arrGroupFullBackgroound[pageChartsAlbum] = "1338548366714816716";
arrGroupFullBackgroound[pageChartsVideo] = "1338548366714816716";
//arrGroupFullBackgroound['Top100'] = "1262182259054037229";
//arrGroupFullBackgroound[pageCharts] = "1262182259054037229";

var arrGroupPopup = new Array();
arrGroupPopup[pageAPlayer] = "1894904669163438980";
arrGroupPopup[pageSPlayer] = "1894904669163438980";
//arrGroupPopup[pageVPlayer] = "1894904669163438980";


var arrGroupCanvas = new Array();
arrGroupCanvas[pageHome] = "1919458954244999115";
arrGroupCanvas[pageVPlayer] = "808713014872590272";
arrGroupCanvas[pageSPlayer] = "2487494694405621709";
arrGroupCanvas[pageAPlayer] = "1376750954056468418";


var AdtimaRenderConfig = {
	ScrollBanner: {
		top: 45
	},
	BackgroundBanner: {
		pageWidth: 1000
	},
	//Balloon: {
	//	right: 45
	//},
	CanvasBanner: {
		hideCanvasOverlay: function () {
			var $oCanvas = $('#advBgCanvasOverlay');
			$oCanvas.length > 0 ? $('#advBgCanvasOverlay').css({ 'top': '-10000px' }) : setTimeout(function() {
				AdtimaRenderConfig.CanvasBanner.hideCanvasOverlay();
			}, 100);
		},
		
		startEffect: function() {
			var $oCanvas = $('#advBgCanvasOverlay');
			$oCanvas.length > 0 && $oCanvas.trigger('click');
		}
	}
};


var AdtimaCanvasBanner = {
	hideCanvasOverlay: function () {
		$('#advBgCanvasOverlay').css({'top': '-10000px'});
	},
	startEffect: function() {
		var $oCanvas = $('#advBgCanvasOverlay');
		$oCanvas.length > 0 && $oCanvas.trigger('click');
	},
	applyCanvasEffect: function (entry) {
		
		var $zone = $('#adtima-zone-' + entry.zid);
		$zone.css({
			'width': entry.banners[0].width + 'px',
			'margin-left': '-' + (parseInt(entry.banners[0].width) / 2) + 'px',
			'left': '50%',
			'height': entry.banners[0].height + 'px',
			'position': 'fixed',
			'top': 0,
			'border': 0,
			'overflow': 'hidden',
			'z-index': 1
		});
		
		//console.log($zone);

		//$('body').addClass('adtimaCanvas');
		$('body').css({ 'overflow-x': 'hidden' });

		$('body').append('<style>.wrapper-page{z-index:3;position:relative;}.advBgCanvasShadow{box-shadow: -2px 2px 5px 0px rgba(0,0,0,0.75)!important;}.advBgCanvasIcon {transform: translate3d(0, 0, 0);}.bounce {animation: bounce 2s infinite;-webkit-animation: bounce 2s infinite;-moz-animation: bounce 2s infinite;-o-animation: bounce 2s infinite;}@-webkit-keyframes bounce {0%, 20%, 50%, 80%, 100% { -webkit-transform: translateX(0); }40% { -webkit-transform: translateX(-12px); }60% { -webkit-transform: translateX(-8px); }}@-moz-keyframes bounce {0%, 20%, 50%, 80%, 100% { -moz-transform: translateX(0); }40% { -moz-transform: translateX(-12px); }60% { -moz-transform: translateX(-8px); }}@-o-keyframes bounce {0%, 20%, 50%, 80%, 100% { -o-transform: translateX(0); }40% { -o-transform: translateX(-12px); }60% { -o-transform: translateX(-8px); }}@keyframes bounce {0%, 20%, 50%, 80%, 100% { transform: translateX(0); }40% { transform: translateX(-12px); }60% { transform: translateX(-8px); }}</style>');
		$('body').append('<div id="advBgCanvasOverlay" style="cursor: pointer;width:100%;height: 100%;position:fixed;top:0;border:0;overflow:hidden;z-index: 2;"></div>');

		$pageWrapper = $('.wrapper-page');
		$('body > .wrapper-page').prepend('<div class="advContentOverlay" style="position:absolute;width:100%;height:100%;z-index:1000000000000;display:none;cursor:pointer;"/>');
		$('body > .wrapper-page').prepend('<div id="advBgCanvasIcon" class="advBgCanvasIcon" style="cursor:pointer;display:none;z-index:1;margin-left:-28px;width:32px;height:32px;background:url(http://static.adtimaserver.vn/resource/img/ac/canvas_bg.png) no-repeat;"><div class="bounce" style="width:32px;height:32px;background:url(http://static.adtimaserver.vn/resource/img/ac/canvas_arrow.png) no-repeat;"></div></div><style></style>');
		var x = 0, y = 0;
		var _closeCanvasAd = function () {
			if (x > 0) {
				x = 0;
				y = 0;

				$('.advContentOverlay, .advBgCanvasIcon').hide();
				$('#advBgCanvasOverlay').show();
				$('body > .wrapper-page').css({ 'transform': 'translate(' + x + 'px, ' + y + 'px)', 'transition': '-webkit-transform 800ms,-moz-transform 800ms,-ms-transform 800ms,-o-transform 800ms,transform 800ms' }).removeClass('advBgCanvasShadow');
				var banner = document.getElementById('adtimaIFrameWrapper_' + entry.zid);
				try {
					banner.contentWindow.stopEffect();
				} catch (e) {
				}
			}
		};
		$('#advBgCanvasOverlay').on('click', function () {
			var banner = document.getElementById('adtimaIFrameWrapper_' + entry.zid);
			try {
				banner.contentWindow.loadEffect();
			} catch (e) {
			}
			
			x = $(window).width() - ($(window).width() / 2 - 500) - 200;
			y = 102;
			$('body > .wrapper-page').css({ 'transform': 'translate(' + x + 'px, ' + y + 'px)', 'transition': '-webkit-transform 800ms,-moz-transform 800ms,-ms-transform 800ms,-o-transform 800ms,transform 800ms' }).addClass('advBgCanvasShadow');

			$('.advContentOverlay').show();
			$('#advBgCanvasOverlay').hide();
			setTimeout(function () {
				$('.advBgCanvasIcon').css({ 'position': 'fixed', 'top': $(window).scrollTop() + $(window).height() / 2 + 'px' }).show();
			}, 600);
		});
		$('.advContentOverlay, #advBgCanvasIcon').on('click', _closeCanvasAd);
		$(".advContentOverlay").hover(function () {
			x = $(window).width() - ($(window).width() / 2 - 500) - 200 - 200;
			y = 102;
			$('body > .wrapper-page').css({ 'transform': 'translate(' + x + 'px, ' + y + 'px)', 'transition': '-webkit-transform 800ms,-moz-transform 800ms,-ms-transform 800ms,-o-transform 800ms,transform 800ms' });
		}, function () {
			if (x > 0) {
				x = $(window).width() - ($(window).width() / 2 - 500) - 200;
				y = 102;
				$('body > .wrapper-page').css({ 'transform': 'translate(' + x + 'px, ' + y + 'px)', 'transition': '-webkit-transform 800ms,-moz-transform 800ms,-ms-transform 800ms,-o-transform 800ms,transform 800ms' });
			}
		});
		$(window).scroll(_closeCanvasAd);
	}
};

window.mp3ContentID && (window.adtimaQueryString = (window.adtimaQueryString ? window.adtimaQueryString + '&' : '') + 'cid=' + window.mp3ContentID);

var area = new Array();
area[0] = "vi";
area[1] = "vi";
area[2] = "ko";
area[3] = "us-uk";
area[4] = "ch";
area[5] = "ja";
area[6] = "newage";
area[7] = "ja";
area[67] = "fr";
var ct_123c;
switch (MP3.GENRE_ID) {
	case 2:
	case 3:
	case 4:
	case 5:
	case 6:
	case 7:
	case 67:
		ct_123c = "en";
		break;
	case 1:
	default:
		ct_123c = "vi";
		break
}
var Ads = {
	_curPage: null,
	_group: null,
	_zoneTopId: "_mp3_adsZoneTop",
	_zoneHomeCenterId: "_mp3_adsZoneHomeCenter",
	_zoneBillboardId: "_mp3_adsZoneBillboard",
	_zoneRight1Id: "_mp3_adsZoneRight1",
	_zoneRight2Id: "_mp3_adsZoneRight2",
	_zoneRight3Id: "_mp3_adsZoneRight3",
	_zoneHalfPageId: "_mp3_adsZoneHalfPage",
	_zoneBalloonId: "_mp3_adsZoneBalloon",
	_zoneLeftId: "_mp3_adsZoneLeft",
	_zoneRightId: "_mp3_adsZoneRight",
	_zoneLeftBgId: "_zoneBackgroundLeft",
	_zoneRightBgId: "_zoneBackgroundRight",
	_zonePrefix: "_zone_",
	_divAds: "_adsCol",
	_isFixed: false,
	_zoneFixed: "_zoneFixed",
	resize: {},
	_getCurPage: function() {
		var a = "";
		var b = "";
		b = location.pathname.substring(1).toLowerCase().split(/[\/,\.]/i);
		//b[0] = "/"; /////////////////////////////////////////////////////////////// Fix tam //////////////////////////////////////////
		switch (b[0]) {
		case "tim-kiem":
			a = pageSearch;
			this._isFixed = true;
			break;
		case "nghe-bxh":
		case "bang-xep-hang":
			a = pageCharts;
			if (typeof(b[1]) == "string") {
				if (b[1].indexOf("bai-hat") > -1) {
					a = pageChartsSong
				} else {
					if (b[1].indexOf("video") > -1) {
						a = pageChartsVideo
					} else {
						if (b[1].indexOf("album") > -1) {
							a = pageChartsAlbum
						}
					}
				}
			}
			break;
		case "bai-hat":
			a = pageSPlayer;
			break;
		case "playlist":
		case "album":
			a = pageAPlayer;
			break;
		case "chu-de":
		case "chu-de-video":
			a = pageTopic;
			break;
		case "the-loai-bai-hat":
		case "the-loai-album":
			a = pageGenreAlbum;
			break;
		case "nghe-si":
			a = pageGenreArtist;
			break;
		case "the-loai-video":
			a = pageGenreVideo;
			break;
		case "video-clip":
			a = pageVPlayer;
			break;
		case "homepage":
		case "/":
		case "":
			a = pageHome;
			break;
		default:
			a = "";
			break
		}

		return a
	},
	_checkGroup: function(c, b) {
		var a;
		a = c[b];
		return a
	},
	setZoneTop: function() {
		var a = this._checkGroup(arrGroupTop, this._curPage);

		if ($("#" + this._zoneTopId).size() && a) {
			$("#" + this._zoneTopId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneTopId, "_zoneTop")
		}
	},
	setZoneHomeCenter: function() {
		var a = this._checkGroup(arrGroupCenter, this._curPage);
		if ($("#" + this._zoneHomeCenterId).size() && a) {
			$("#" + this._zoneHomeCenterId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneHomeCenterId, "_zoneHomeCenter")
		}
	},
	setZoneRight1: function() {
		var a = this._checkGroup(arrGroupRight1, this._curPage);
		if ($("#" + this._zoneRight1Id).size() && a) {
			$("#" + this._zoneRight1Id).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneRight1Id, "_zoneRight1")
			this.setZoneHalfPage();
		}
	},
	setZoneRight2: function() {
		var a = this._checkGroup(arrGroupRight2, this._curPage);
		if ($("#" + this._zoneRight2Id).size() && a) {
			$("#" + this._zoneRight2Id).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneRight2Id, "_zoneRight2")
		}
	},
	setZoneHalfPage: function() {
		var a = this._checkGroup(arrGroupHalfPage, this._curPage);
		if (a && $("#" + this._zoneHalfPageId).length <= 0) {
			var $r1 = $("#" + this._zoneRight1Id),
				$div = $('<div class="widget widget-banner _adsCol"/>').hide();
			$div.append('<div id="' + this._zoneHalfPageId + '" class="_adsZone ads-300-600"><div z2-zoneid="' + a + '"></div></div>');
			$r1.parent().before($div);
		}
	},
	setZoneRight3: function() {
		var a = this._checkGroup(arrGroupRight3, this._curPage);
		if ($("#" + this._zoneRight3Id).size() && a) {
			$("#" + this._zoneRight3Id).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneRight3Id, "_zoneRight3")
		}
	},
	setZoneBalloon: function() {

		var a = this._checkGroup(arrGroupBalloon, this._curPage);

		if ($("#" + this._zoneBalloonId).size() && a) {
			$("#" + this._zoneBalloonId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneBalloonId, "_zoneBalloon")
		}
	},
	setZoneLeft: function() {

		var a = this._checkGroup(arrGroupLeft, this._curPage);

		if ($("#" + this._zoneLeftId).size() && a) {
			$("#" + this._zoneLeftId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneLeftId, "_zoneLeft")
		}
	},
	setZoneRight: function() {

		var a = this._checkGroup(arrGroupRight, this._curPage);

		if ($("#" + this._zoneRightId).size() && a) {
			$("#" + this._zoneRightId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneRightId, "_zoneRight")
		}
	},
	setZoneBackgroundLeft: function() {
		var a = this._checkGroup(arrGroupBgLeft, this._curPage);

		if ($("#" + this._zoneLeftBgId).size() && a) {
			$("#" + this._zoneLeftBgId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneLeftId, "_zoneBackgroundLeft")
		}
	},
	setZoneBackgroundRight: function() {

		var a = this._checkGroup(arrGroupBgRight, this._curPage);

		if ($("#" + this._zoneRightBgId).size() && a) {
			$("#" + this._zoneRightBgId).attr("name", this._zonePrefix + a);
			this._addZone(a, this._zoneRightId, "_zoneBackgroundRight")
		}
	},
	setZoneFooterPopup: function() {
		var a = this._checkGroup(arrGroupFooterPopup, this._curPage);
		if (a) {
			this._addZone(a, "", "_zoneFooterPopup")
		}
	},
	_addZone: function(a, g, d) {

		if (MP3.IEVERSION > 6) {
			var style = "";
			switch (d) {
			case "_zoneTop":
				style = " z2-height='90' z2-width='980'  align='center' ";
				break;
			case "_zoneRight1":
			case "_zoneRight2":
				style = " z2-height='250' z2-width='300' ";
				break;
			case "_zoneBalloon":
				style = " z2-type='balloon' ";
				break;
			case "_zoneRight3":
				style = " z2-height='100' z2-width='300' ";
				break;
			case "_zoneBackgroundLeft":
				style = "z2-type='backgroundleft' z2-height='1200' z2-width='700' ";
				break;
			case "_zoneBackgroundRight":
				style = "z2-type='backgroundright' z2-height='1200' z2-width='700' ";
				break;
			}
			if (d == "_zoneLeft") {

				function FloatTopDivLeft() {
					//alert(document.body.clientWidth);
					startX2 = document.body.clientWidth - 1004, startY2 = 71;
					//startX2 = document.body.clientWidth/2 - 500, startY2 = 71;

					var ns2 = (navigator.appName.indexOf("Netscape") != -1);
					var d2 = document;

					//if (document.body.clientWidth < 980) startX2 = -110;

					function ml2(id) {
						var el2 = d2.getElementById ? d2.getElementById(id) : d2.all ? d2.all[id] : d2.layers[id];
						if (d2.layers)
							el2.style = el2;
						el2.sP = function(x, y) {

							//this.style.left=x;
							//                          this.style.left = document.body.clientWidth / 2 - 640

							//                            this.style.top = y;
							this.setAttribute("style", "border:1px;left:" + (document.body.clientWidth / 2 - 640) + "px;width:150px;height:600px;position:fixed;bottom:0px");
						};
						el2.sP2 = function(x, y) {

							//this.style.left=x;
							//                        this.style.left = document.body.clientWidth / 2 - 640
							//                      this.style.bottom = 0;
							this.setAttribute("style", "border:1px;left:" + (document.body.clientWidth / 2 - 640) + "px;width:150px;height:600px;position:fixed;bottom:0px");
						};
						el2.x = startX2;
						el2.y = startY2;
						return el2;
					}

					window.stayTopLeft2 = function() {
						if (document.body.clientWidth < 980) {
							ftlObj2.x = -115;
							ftlObj2.y = 0;
							ftlObj2.sP2(ftlObj2.x, ftlObj2.y);
						} else {

							if (document.documentElement && document.documentElement.scrollTop) {
								var pY2 = ns2 ? pageYOffset : document.documentElement.scrollTop;

							} else if (document.body)
								var pY2 = ns2 ? pageYOffset : document.body.scrollTop;
							if (document.body.scrollTop > 71) {
								startY2 = 3
							} else {
								startY2 = 71
							}
							;
							if (document.body.clientWidth >= 1024) {
								ftlObj2.x = 0;
								ftlObj2.y += (pY2 + startY2 - ftlObj2.y) / 32;
								ftlObj2.sP2(ftlObj2.x, ftlObj2.y);
							} else {
								ftlObj2.x = startX2;
								ftlObj2.y += (pY2 + startY2 - ftlObj2.y) / 32;
								ftlObj2.sP2(ftlObj2.x, ftlObj2.y);
							}
						}
						setTimeout("stayTopLeft2()", 1);
					}

					ftlObj2 = ml2("_zoneLeft");
					stayTopLeft2();

				}

				function ShowAdDivLeft() {
					var objAdDivLeft = document.getElementById("_zoneLeft");
					if (document.body.clientWidth < 980) {
						objAdDivLeft.style.left = -110;
					} else {
						objAdDivLeft.style.left = 0;
					}
					FloatTopDivLeft();
				}

				ShowAdDivLeft();

			}
			if (d == "_zoneRight") {

				function FloatTopDivRight() {
					startX = document.body.clientWidth - 110, startY = 71;

					var ns = (navigator.appName.indexOf("Netscape") != -1);
					var d = document;

					if (document.body.clientWidth < 980)
						startX = -110;

					function ml(id) {

						var el = d.getElementById ? d.getElementById(id) : d.all ? d.all[id] : d.layers[id];

						if (d.layers)
							el.style = el;

						el.sP = function(x, y) {

							//this.style.left=x;
							//this.style.left = document.body.clientWidth / 2 + 610 - 120;
							//				 console.info("id="+document.body.clientWidth / 2 + 610 - 120);
							//     this.style.top = y;
						};
						el.sP2 = function(x, y) {
							//this.style.left=x;

							//this.style.left = document.body.clientWidth / 2 + 610 - 120;
							//this.style.bottom = 10;
							this.setAttribute("style", "border:1px;left:" + (document.body.clientWidth / 2 + 610 - 120) + "px;width:150px;height:600px;position:fixed;bottom:0px");
						};

						el.x = startX;
						el.y = startY;
						return el;
					}

					window.stayTopLeft = function() {

						if (document.body.clientWidth < 980) {
							ftlObj.x = -115;
							ftlObj.y = 0;
							ftlObj.sP2(ftlObj.x, ftlObj.y);
						} else {
							if (document.documentElement && document.documentElement.scrollTop)
								var pY = ns ? pageYOffset : document.documentElement.scrollTop;
							else if (document.body)
								var pY = ns ? pageYOffset : document.body.scrollTop;
							if (document.body.scrollTop > 71) {
								startY = 3
							} else {
								startY = 71
							}
							;
							if (document.body.clientWidth >= 1024) {
								ftlObj.x = document.body.clientWidth - 110;
								ftlObj.y += (pY + startY - ftlObj.y) / 32;
								ftlObj.sP2(ftlObj.x, ftlObj.y);
							} else {

								ftlObj.x = startX;
								ftlObj.y += (pY + startY - ftlObj.y) / 32;

								ftlObj.sP2(ftlObj.x, ftlObj.y);
							}
						}
						setTimeout("stayTopLeft()", 1);
					}

					ftlObj = ml("_zoneRight");
					stayTopLeft();
					//window.document.getElementById("_zoneRight").setAttribute("style","left:300px;");

				}

				function ShowAdDivRight() {
					var objAdDivRight = document.getElementById("_zoneRight");
					if (document.body.clientWidth < 980) {
						objAdDivRight.style.left = -110;
					} else {
						objAdDivRight.style.left = document.body.clientWidth - 110;
					}
					FloatTopDivRight();
					//FloatTopDiv2();
				}

				ShowAdDivRight();
			}


			document.write('<div  z2-zoneid="' + a + '" ' + style + ' class="z2-zads-zone" ></div>');


			/*
						var c = "https:" == location.protocol ? "https://api.adtimaserver.vn/ajs.js" : "http://api.adtimaserver.vn/ajs.js",
								d = Math.floor(99999999999 * Math.random()),
								e = screen.width,
								f = screen.height;
						document.MAX_used || (document.MAX_used = ",");
						document.write("<script type='text/javascript' src='" + c);
						document.write("?zid=" + a);
						document.write("&amp;cb=" + d + "&amp;width=" + e + "&amp;height=" + f);
						"," != document.MAX_used && document.write("&amp;exclude=" + document.MAX_used);
						document.write(document.charset ? "&amp;charset=" + document.charset : document.characterSet ? "&amp;charset=" + document.characterSet : "");
						document.write("&amp;loc=" + escape(window.location));
						document.referrer && document.write("&amp;referer=" + escape(document.referrer));
						document.context && document.write("&context=" + escape(document.context));
						document.mmm_fo && document.write("&amp;mmm_fo=1");
						document.write("'>\x3c/script>")*/
		}


	},
	loadZone: function() {
		var vng_b474a66f = '';
		vng_b474a66f += "<" + "!-- 123Click Ads Code begin -->\n";
		vng_b474a66f += "<" + "script type=\"text/javascript\" >\n";
		vng_b474a66f += "(function(d, s, id) {\n";
		vng_b474a66f += "var js, fjs = d.getElementsByTagName(s)[0];\n";
		vng_b474a66f += "if (d.getElementById(id)) {return;}\n";
		vng_b474a66f += "js = d.createElement(s);\n";
		vng_b474a66f += "js.type = \'text/javascript\';\n";
		vng_b474a66f += "js.async=true;\n";
		vng_b474a66f += "js.id = id;\n";
		vng_b474a66f += "js.src = \"http://static.adtimaserver.vn/resource/js/zads.js?q=" + Math.random() + "\";\n";
		vng_b474a66f += "fjs.parentNode.insertBefore(js, fjs);}(document, \'script\', \'z2-jssdk\'));\n";
		vng_b474a66f += "</script>\n";
		document.write(vng_b474a66f);
		this._curPage = this._getCurPage();

	},
	
	setCurPage: function() {
		this._curPage = this._getCurPage();
	},

	addBaseScript: function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) {
			return;
		}
		js = d.createElement(s);
		js.type = 'text/javascript';
		js.async = true;
		js.id = id;
		js.src = "http://static.adtimaserver.vn/resource/js/zads.js?q=" + Math.random();
		fjs.parentNode.insertBefore(js, fjs);
	},

	removeBanner: function () {
		var a = ["_zoneTop", "_zoneHomeCenter", "_zoneRight1", "_zoneRight2", "_zoneRight3", "_zoneBalloon", "_zoneFooterPopup", "_zoneBackgroundRight", "_zoneBackgroundLeft"];
		for (var b = 0; b < a.length; b++) {
			if ($("#" + a[b]).size()) {
				$("#" + a[b]).addClass("none")
			}
		}
		MP3.BANNER_OFF = 1;
		var exdays = 100;
		var exdate = new Date();
		exdate.setDate(exdate.getDate() + exdays);
		var cValue = escape(1) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString()) + "; path=/";
		document.cookie = "BANNER_OFF" + "=" + cValue;


	}

};


Ads.setCurPage();


function addIframe(args) {
	var iframe = '<iframe name="adtima_ads_iframe" id="adtima_ads_iframe" src="' + args[0] + '" width="' + args[1] + '" height="' + args[2] + '" frameborder="0" scrolling="no"></iframe>';
	var imgTracking = '';
	if (args[4] != undefined)
		imgTracking = '<img src="' + args[4] + '" alt="">';
	var divPlayer = document.getElementsByClassName('player');
	if (divPlayer.length === 0)
		return;

	var styleOverlay = document.createElement("style");
	styleOverlay.type = "text/css";
	styleOverlay.innerHTML = '#adtima-ad-overlay {width: ' + args[1] + 'px;height:' + args[2] + 'px;margin:20px 0 0 15px;position:absolute;}' +
	'@media (max-width: 1260px) {' +
	'		#adtima-ad-overlay {' +
	'			width:620px;height: 115px;' +
	'		}' +
	'		#adtima-ad-overlay iframe{width:620px;height: 95px; }' +
	'	}' +
	'	@media only screen and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) {' +
	'		#adtima-ad-overlay{' +
	'			width:590px;height: 100px;' +
	'		}' +
	'		#adtima-ad-overlay iframe{width:590px;height: 80px; }' +
	'	}';
	divPlayer[0].appendChild(styleOverlay);

	var divOverlayAd = document.createElement("div");
	divOverlayAd.id = 'adtima-ad-overlay';
	var divAd = document.createElement("div");
	divAd.style.cssText = "opacity:1;transition:opacity 0.5s;-webkit-transition:opacity 0.5s;-moz-transition:opacity 0.5s;-o-transition:opacity 0.5s";
	divOverlayAd.appendChild(divAd);

	var divOpenAd = document.createElement("div");
	divOpenAd.style.cssText = "width: 100%;height: auto;text-align:center;position:absolute;top:-1px;opacity:0;transition:opacity 0.5s;-webkit-transition:opacity 0.5s;-moz-transition:opacity 0.5s;-o-transition:opacity 0.5s";
	var openButton = document.createElement("a");
	divOpenAd.appendChild(openButton);
	openButton.style.cssText = "background:url(http://static.adtimaserver.vn/resource/images/open_ads.png);display:block;width:40px;height:20px;margin:0 auto;cursor:pointer";
	openButton.onclick = function () { divOpenAd.style.opacity = 0; divAd.style.display = "block"; divOverlayAd.style.height = ""; divAd.style.opacity = 1; };
	openButton.onmouseover = function () { openButton.style.background = "url(http://static.adtimaserver.vn/resource/images/open_ads_hover.png)"; }
	openButton.onmouseout = function () { openButton.style.background = "url(http://static.adtimaserver.vn/resource/images/open_ads.png)"; }
	divOverlayAd.appendChild(divOpenAd);

	if (divAd) {
		divAd.innerHTML = iframe + imgTracking;
		setTimeout(function () {
			divAd.style.opacity = 0; divOpenAd.style.opacity = 1; setTimeout(function () { divAd.style.display = "none"; divOverlayAd.style.height = "20px" }, 600);
		}, parseInt(args[3]));
	}
	var closeButton = document.createElement("a");
	var closeBtnCss = "float:right;top:4px;right:6px;width:24px;height:24px;cursor:pointer;display: block;position:absolute;z-index:1000;background:url(http://static.adtimaserver.vn/resource/images/close_ads.png)";
	closeButton.style.cssText = closeBtnCss;
	closeButton.onclick = function () { divAd.style.opacity = 0; divOpenAd.style.opacity = 1; setTimeout(function () { divAd.style.display = "none"; divOverlayAd.style.height = "20px" }, 600); };
	closeButton.onmouseover = function () { closeButton.style.background = "url(http://static.adtimaserver.vn/resource/images/close_ads_hover.png)"; }
	closeButton.onmouseout = function () { closeButton.style.background = "url(http://static.adtimaserver.vn/resource/images/close_ads.png)"; }
	divAd.appendChild(closeButton);
	//divPlayer[0].appendChild(divOverlayAd);
	divPlayer[0].insertBefore(divOverlayAd, divPlayer[0].firstChild);
}

function fnGetDisplayName() {
	return MP3.DISPLAY_NAME;
}


var currentBillboardZoneId = 0;
var currentFullBackgroundZoneId = 0;
window.adtimaCallBack = {
	startShow: function (entry) {
		try {
			if (entry.bannerId.indexOf('1421365485189444332,') >= 0) {
				$('#_mp3_adsZoneCommentLeader').css('background', '#fff');
			}


			var currrentHalfPageZoneId = arrGroupHalfPage[Ads._getCurPage()];
			if (currrentHalfPageZoneId == entry.zid) {
				$('#_mp3_adsZoneRight1').parent().hide();
				$('#_mp3_adsZoneRight2').parent().hide();
				$('#_mp3_adsZoneHalfPage').parent().show();
			} else {
				var currentRight1ZoneId = arrGroupRight1[Ads._getCurPage()];
				if (currentRight1ZoneId == entry.zid) {
					if (parseInt(entry.banners[0].height) >= 500) {
						var r2 = document.getElementById('_mp3_adsZoneRight2');
						r2.style.display = 'none';

						r1.parentNode.parentNode.style.overflow = 'inherit';
						r1.style.height = 'auto';
					}
				} else {
					currentBillboardZoneId = arrGroupBillboard[Ads._getCurPage()];
					if (entry.zid == currentBillboardZoneId || entry.zid == arrGroupTop[Ads._getCurPage()]) {
						if (parseInt(entry.banners[0].width) > 10){
							if (parseInt(entry.banners[0].width) < 1000) {
								$('#_mp3_adsZoneBillboard').css({ 'width':'1004px','padding-top':'12px','margin':'0 auto','background':'#fff' });
							}
						}
					} else {
						//fullbackground
						if (entry.zid == currentFullBackgroundZoneId) {
							$('.wrap-sidebar').hide();
							$('.wrap-content').css({ 'background-color': "white", "z-index": 900000, "position": "relative", "border-left": "15px solid #fff", "border-right": "15px solid #fff", "border-top": "15px solid #fff", "box-sizing": "content-box", "padding-bottom": "20px", "margin-top": "120px" });
							//$('.wrap-content .section').css({ 'background-color': "white", "z-index": 900000, "position": "relative", "margin-top": "120px" });
							$('#advFullBackground').css({ "width": entry.banners[0].width + "px", 'margin-left': '-' + entry.banners[0].width / 2 + 'px' }).show();
							$('header, nav').css({ "position": "relative", "z-index": 900001 });
						} else {
							var currentBalloon = arrGroupBalloon[Ads._getCurPage()];
							if (entry.zid == currentBalloon) {
								$('footer, .quick-nav-bar').css({ 'z-index': 999 });
								$('.fix-button').hide();
							}
							else if (entry.zid == arrGroupPopup[Ads._getCurPage()])
							{
								setTimeout(function(){
									if (window.z3Player && window.z3Player.pause) z3Player.pause();
									else if (window.zmp3Player && window.zmp3Player.player.PauseMedia) zmp3Player.player.PauseMedia();
								}, 1000);
							}
						}
					}
				}
			}
		}
		catch (e) {
		}
	},

	endShow: function(entry) {
		if (entry.zid == arrGroupCanvas[Ads._getCurPage()]) {
			AdtimaCanvasBanner.applyCanvasEffect(entry);
		}

		if (parseInt(entry.banners[0].width) < 10) {
			$('#adtima-zone-' + entry.zid).css({ "position": "absolute", "top": '-10000px', 'display': 'none' });
		}
	},

	close: function (zoneId) {
		if (zoneId == arrGroupBillboard[Ads._getCurPage()]) {
		}
	},

	closePopup: function(zoneId){
		if (zoneId == arrGroupPopup[Ads._getCurPage()])
		{
			//console.log('z3player resume');
			if (window.z3Player && window.z3Player.resume) z3Player.resume();
			else if (window.zmp3Player && window.zmp3Player.player.Play) zmp3Player.player.Play();
		}
	}
};

function fnGetSongInfo() {
	var $ul = $('.provider'),
		mp3Id = $ul.attr('rel'),
		song = $ul.attr('sname'),
		singer = $ul.attr('aname');
	if (mp3Id && song && singer) {
		return {
			'mp3': mp3Id,
			'song': song,
			'singer': singer
		};
	}

	return null;
}

function fnOpenViettelPopup() {
	$('.viettel').trigger('click');
}

(function () {
	//popup
	try
	{
		if (window.MP3 && MP3.BANNER_OFF != 1 && arrGroupPopup[Ads._getCurPage()])
		{
			window.adtimazones = window.adtimazones || [];
			window.adtimazones.push({ elementId: '', zoneId: arrGroupPopup[Ads._getCurPage()], type: 'popup' });
		}
	}
	catch (ex)
	{
	}
	
	//billboard
	$(document).ready(function () {
		if (MP3.BANNER_OFF != 1) {
			try {
				var currentPage = Ads._getCurPage();
				if (currentPage == 'homepage' || currentPage == 'search' || currentPage == 'album_player' || currentPage == 'video_player' || currentPage == 'song_player') {
					currentBillboardZoneId = arrGroupBillboard[currentPage];
					var html = '';
					arrGroupBillboard[currentPage] && (html += '<div z2-close="true" z2-close-freq="-1" z2-zoneid="' + arrGroupBillboard[currentPage] + '"></div>');
					arrGroupTop[currentPage] && (html += '<div z2-zoneid="' + arrGroupTop[currentPage] + '"></div>');

					html && $('#_mp3_adsZoneBillboard').html(html);
					
					//canvas
					var canvasZoneId = arrGroupCanvas[Ads._getCurPage()];
					if (canvasZoneId)
					{
						$('body').append('<div z2-zoneid="'+canvasZoneId+'"></div>');
					}
				}

				//fullbackground
				if (document.URL.toLowerCase().indexOf('/top100/') > 0 || (currentPage != '' && currentPage.indexOf('charts') >= 0)) {
					//if (document.URL.toLowerCase().indexOf('/top100/') > 0) {
					currentFullBackgroundZoneId = document.URL.toLowerCase().indexOf('/top100/') > 0 ? arrGroupFullBackgroound['Top100'] : arrGroupFullBackgroound[currentPage];
					$('body').append('<div id="advFullBackground" style="left:50%;height:100%;position:fixed;top:0;border:0;z-index: 1;display: none;"></div>');
					if (!window.AdtimaRender) {
						window.adtimazones = window.adtimazones || [];
						window.adtimazones.push({ elementId: 'advFullBackground', zoneId: currentFullBackgroundZoneId, type: '' });
					} else {
						window.AdtimaRender.Proceed.renderBanner('advFullBackground', currentFullBackgroundZoneId, '');
					}
				}
			}
			catch (ex) {
			}


			try {
				if ($(window).width() > 1028) {
					$('#_mp3_adsZoneCommentLeader').attr('z2-inviewport', 'autoplayvideo');
					if (!window.AdtimaRender) {
						window.adtimazones = window.adtimazones || [];
						window.adtimazones.push({ elementId: '_mp3_adsZoneCommentLeader', zoneId: arrGroupComment[Ads._getCurPage()], type: '' });
					} else {
						window.AdtimaRender.Proceed.renderBanner('_mp3_adsZoneCommentLeader', arrGroupComment[Ads._getCurPage()], '');
					}
				}
			}
			catch (ex) {
			}
			
			Ads.addBaseScript(document, 'script', 'z2-jssdk');
		}
	});

	var s = document.getElementsByTagName('script')[0];
	var pg = document.createElement('script');
	pg.type = 'text/javascript';
	pg.async = true;
	pg.src = '//js.revsci.net/gateway/gw.js?csid=F09828&auto=t&bpid=zingvng_vn';
	s.parentNode.insertBefore(pg, s);

})();