
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){b(require("jquery"))}else{b(jQuery)}}}(function(m){var j=/\+/g;function o(a){return i.raw?a:encodeURIComponent(a)}function l(a){return i.raw?a:decodeURIComponent(a)}function k(a){return o(i.json?JSON.stringify(a):String(a))}function p(b){if(b.indexOf('"')===0){b=b.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{b=decodeURIComponent(b.replace(j," "));return i.json?JSON.parse(b):b}catch(a){}}function n(b,c){var a=i.raw?b:p(b);return m.isFunction(c)?c(a):a}var i=m.cookie=function(b,c,y){if(c!==undefined&&!m.isFunction(c)){y=m.extend({},i.defaults,y);if(typeof y.expires==="number"){var a=y.expires,z=y.expires=new Date();z.setTime(+z+a*86400000)}return(document.cookie=[o(b),"=",k(c),y.expires?"; expires="+y.expires.toUTCString():"",y.path?"; path="+y.path:"",y.domain?"; domain="+y.domain:"",y.secure?"; secure":""].join(""))}var t=b?undefined:{};var A=document.cookie?document.cookie.split("; "):[];for(var d=0,f=A.length;d<f;d++){var e=A[d].split("=");var h=l(e.shift());var g=e.join("=");if(b&&b===h){t=n(g,c);break}if(!b&&(g=n(g))!==undefined){t[h]=g}}return t};i.defaults={};m.removeCookie=function(a,b){if(m.cookie(a)===undefined){return false}m.cookie(a,"",m.extend({},b,{expires:-1}));return !m.cookie(a)}}));
/*! jquery.mousewheel.min.js (http://brandon.aaron.sh)
		 * Version: 3.1.11
		 */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(v){function u(A){var z=A||window.event,y=n.call(arguments,1),w=0,k=0,i=0,f=0,e=0,d=0;if(A=v.event.fix(z),A.type="mousewheel","detail" in z&&(i=-1*z.detail),"wheelDelta" in z&&(i=z.wheelDelta),"wheelDeltaY" in z&&(i=z.wheelDeltaY),"wheelDeltaX" in z&&(k=-1*z.wheelDeltaX),"axis" in z&&z.axis===z.HORIZONTAL_AXIS&&(k=-1*i,i=0),w=0===i?k:i,"deltaY" in z&&(i=-1*z.deltaY,w=i),"deltaX" in z&&(k=z.deltaX,0===i&&(w=-1*k)),0!==i||0!==k){if(1===z.deltaMode){var c=v.data(this,"mousewheel-line-height");w*=c,i*=c,k*=c}else{if(2===z.deltaMode){var a=v.data(this,"mousewheel-page-height");w*=a,i*=a,k*=a}}if(f=Math.max(Math.abs(i),Math.abs(k)),(!q||q>f)&&(q=f,s(z,f)&&(q/=40)),s(z,f)&&(w/=40,k/=40,i/=40),w=Math[w>=1?"floor":"ceil"](w/q),k=Math[k>=1?"floor":"ceil"](k/q),i=Math[i>=1?"floor":"ceil"](i/q),l.settings.normalizeOffset&&this.getBoundingClientRect){var B=this.getBoundingClientRect();e=A.clientX-B.left,d=A.clientY-B.top}return A.deltaX=k,A.deltaY=i,A.deltaFactor=q,A.offsetX=e,A.offsetY=d,A.deltaMode=0,y.unshift(A,w,k,i),r&&clearTimeout(r),r=setTimeout(t,200),(v.event.dispatch||v.event.handle).apply(this,y)}}function t(){q=null}function s(d,c){return l.settings.adjustOldDeltas&&"mousewheel"===d.type&&c%120===0}var r,q,p=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice;if(v.event.fixHooks){for(var m=p.length;m;){v.event.fixHooks[p[--m]]=v.event.mouseHooks}}var l=v.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener){for(var a=o.length;a;){this.addEventListener(o[--a],u,!1)}}else{this.onmousewheel=u}v.data(this,"mousewheel-line-height",l.getLineHeight(this)),v.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=o.length;a;){this.removeEventListener(o[--a],u,!1)}}else{this.onmousewheel=null}v.removeData(this,"mousewheel-line-height"),v.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){var d=v(a)["offsetParent" in v.fn?"offsetParent":"parent"]();return d.length||(d=v("body")),parseInt(d.css("fontSize"),10)},getPageHeight:function(a){return v(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};v.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});(function(d,e,f){(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery-mousewheel"],a)}else{a(jQuery)}}(function(r){var u="mCustomScrollbar",y="mCS",c=".mCustomScrollbar",t={setWidth:false,setHeight:false,setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:true,autoHideScrollbar:false,autoExpandScrollbar:false,alwaysShowScrollbar:0,snapAmount:null,snapOffset:0,mouseWheel:{enable:true,scrollAmount:"auto",axis:"y",preventDefault:false,deltaFactor:"auto",normalizeDelta:false,invert:false,disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{enable:false,scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:true,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoExpandHorizontalScroll:false,autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:true,updateOnImageLoad:true,updateOnSelectorChange:false},theme:"light",callbacks:{onScrollStart:false,onScroll:false,onTotalScroll:false,onTotalScrollBack:false,whileScrolling:false,onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:true,onOverflowY:false,onOverflowX:false,onOverflowYNone:false,onOverflowXNone:false},live:false,liveSelector:null},p=0,a={},v=function(g){if(a[g]){clearTimeout(a[g]);s._delete.call(null,a[g])}},q=(d.attachEvent&&!d.addEventListener)?1:0,b=false,w={init:function(i){var i=r.extend(true,{},t,i),j=s._selector.call(this);if(i.live){var g=i.liveSelector||this.selector||c,h=r(g);if(i.live==="off"){v(g);return}a[g]=setTimeout(function(){h.mCustomScrollbar(i);if(i.live==="once"&&h.length){v(g)}},500)}else{v(g)}i.setWidth=(i.set_width)?i.set_width:i.setWidth;i.setHeight=(i.set_height)?i.set_height:i.setHeight;i.axis=(i.horizontalScroll)?"x":s._findAxis.call(null,i.axis);i.scrollInertia=i.scrollInertia>0&&i.scrollInertia<17?17:i.scrollInertia;if(typeof i.mouseWheel!=="object"&&i.mouseWheel==true){i.mouseWheel={enable:true,scrollAmount:"auto",axis:"y",preventDefault:false,deltaFactor:"auto",normalizeDelta:false,invert:false}}i.mouseWheel.scrollAmount=!i.mouseWheelPixels?i.mouseWheel.scrollAmount:i.mouseWheelPixels;i.mouseWheel.normalizeDelta=!i.advanced.normalizeMouseWheelDelta?i.mouseWheel.normalizeDelta:i.advanced.normalizeMouseWheelDelta;i.scrollButtons.scrollType=s._findScrollButtonsType.call(null,i.scrollButtons.scrollType);s._theme.call(null,i);return r(j).each(function(){var n=r(this);if(!n.data(y)){n.data(y,{idx:++p,opt:i,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:false,tweenRunning:false,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null});var l=n.data(y).opt,m=n.data("mcs-axis"),o=n.data("mcs-scrollbar-position"),k=n.data("mcs-theme");if(m){l.axis=m}if(o){l.scrollbarPosition=o}if(k){l.theme=k;s._theme.call(null,l)}s._pluginMarkup.call(this);w.update.call(null,n)}})},update:function(g){var h=g||s._selector.call(this);return r(h).each(function(){var l=r(this);if(l.data(y)){var j=l.data(y),k=j.opt,n=r("#mCSB_"+j.idx+"_container"),m=[r("#mCSB_"+j.idx+"_dragger_vertical"),r("#mCSB_"+j.idx+"_dragger_horizontal")];if(!n.length){return}if(j.tweenRunning){s._stop.call(null,l)}if(l.hasClass("mCS_disabled")){l.removeClass("mCS_disabled")}if(l.hasClass("mCS_destroyed")){l.removeClass("mCS_destroyed")}s._maxHeight.call(this);s._expandContentHorizontally.call(this);if(k.axis!=="y"&&!k.advanced.autoExpandHorizontalScroll){n.css("width",s._contentWidth(n.children()))}j.overflowed=s._overflowed.call(this);s._scrollbarVisibility.call(this);if(k.autoDraggerLength){s._setDraggerLength.call(this)}s._scrollRatio.call(this);s._bindEvents.call(this);var i=[Math.abs(n[0].offsetTop),Math.abs(n[0].offsetLeft)];if(k.axis!=="x"){if(!j.overflowed[0]){s._resetContentPosition.call(this);if(k.axis==="y"){s._unbindEvents.call(this)}else{if(k.axis==="yx"&&j.overflowed[1]){s._scrollTo.call(this,l,i[1].toString(),{dir:"x",dur:0,overwrite:"none"})}}}else{if(m[0].height()>m[0].parent().height()){s._resetContentPosition.call(this)}else{s._scrollTo.call(this,l,i[0].toString(),{dir:"y",dur:0,overwrite:"none"});j.contentReset.y=null}}}if(k.axis!=="y"){if(!j.overflowed[1]){s._resetContentPosition.call(this);if(k.axis==="x"){s._unbindEvents.call(this)}else{if(k.axis==="yx"&&j.overflowed[0]){s._scrollTo.call(this,l,i[0].toString(),{dir:"y",dur:0,overwrite:"none"})}}}else{if(m[1].width()>m[1].parent().width()){s._resetContentPosition.call(this)}else{s._scrollTo.call(this,l,i[1].toString(),{dir:"x",dur:0,overwrite:"none"});j.contentReset.x=null}}}s._autoUpdate.call(this)}})},scrollTo:function(g,h){if(typeof g=="undefined"||g==null){return}var i=s._selector.call(this);return r(i).each(function(){var m=r(this);if(m.data(y)){var j=m.data(y),k=j.opt,l={trigger:"external",scrollInertia:k.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:false,timeout:60,callbacks:true,onStart:true,onUpdate:true,onComplete:true},o=r.extend(true,{},l,h),z=s._arr.call(this,g),n=o.scrollInertia>0&&o.scrollInertia<17?17:o.scrollInertia;z[0]=s._to.call(this,z[0],"y");z[1]=s._to.call(this,z[1],"x");if(o.moveDragger){z[0]*=j.scrollRatio.y;z[1]*=j.scrollRatio.x}o.dur=n;setTimeout(function(){if(z[0]!==null&&typeof z[0]!=="undefined"&&k.axis!=="x"&&j.overflowed[0]){o.dir="y";o.overwrite="all";s._scrollTo.call(this,m,z[0].toString(),o)}if(z[1]!==null&&typeof z[1]!=="undefined"&&k.axis!=="y"&&j.overflowed[1]){o.dir="x";o.overwrite="none";s._scrollTo.call(this,m,z[1].toString(),o)}},o.timeout)}})},stop:function(){var g=s._selector.call(this);return r(g).each(function(){var h=r(this);if(h.data(y)){s._stop.call(null,h)}})},disable:function(g){var h=s._selector.call(this);return r(h).each(function(){var k=r(this);if(k.data(y)){var i=k.data(y),j=i.opt;s._autoUpdate.call(this,"remove");s._unbindEvents.call(this);if(g){s._resetContentPosition.call(this)}s._scrollbarVisibility.call(this,true);k.addClass("mCS_disabled")}})},destroy:function(){var g=s._selector.call(this);return r(g).each(function(){var k=r(this);if(k.data(y)){var i=k.data(y),j=i.opt,m=r("#mCSB_"+i.idx),l=r("#mCSB_"+i.idx+"_container"),h=r(".mCSB_"+i.idx+"_scrollbar");if(j.live){v(g)}s._autoUpdate.call(this,"remove");s._unbindEvents.call(this);s._resetContentPosition.call(this);k.removeData(y);s._delete.call(null,this.mcs);h.remove();m.replaceWith(l.contents());k.removeClass(u+" _"+y+"_"+i.idx+" mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")}})}},s={_selector:function(){return(typeof r(this)!=="object"||r(this).length<1)?c:this},_theme:function(i){var j=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],k=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],l=["minimal","minimal-dark"],g=["minimal","minimal-dark"],h=["minimal","minimal-dark"];i.autoDraggerLength=r.inArray(i.theme,j)>-1?false:i.autoDraggerLength;i.autoExpandScrollbar=r.inArray(i.theme,k)>-1?false:i.autoExpandScrollbar;i.scrollButtons.enable=r.inArray(i.theme,l)>-1?false:i.scrollButtons.enable;i.autoHideScrollbar=r.inArray(i.theme,g)>-1?true:i.autoHideScrollbar;i.scrollbarPosition=r.inArray(i.theme,h)>-1?"outside":i.scrollbarPosition},_findAxis:function(g){return(g==="yx"||g==="xy"||g==="auto")?"yx":(g==="x"||g==="horizontal")?"x":"y"},_findScrollButtonsType:function(g){return(g==="stepped"||g==="pixels"||g==="step"||g==="click")?"stepped":"stepless"},_pluginMarkup:function(){var m=r(this),n=m.data(y),g=n.opt,E=g.autoExpandScrollbar?" mCSB_scrollTools_onDrag_expand":"",j=["<div id='mCSB_"+n.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+g.theme+" mCSB_scrollTools_vertical"+E+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+n.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+n.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+g.theme+" mCSB_scrollTools_horizontal"+E+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+n.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],D=g.axis==="yx"?"mCSB_vertical_horizontal":g.axis==="x"?"mCSB_horizontal":"mCSB_vertical",o=g.axis==="yx"?j[0]+j[1]:g.axis==="x"?j[1]:j[0],C=g.axis==="yx"?"<div id='mCSB_"+n.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",F=g.autoHideScrollbar?" mCS-autoHide":"",i=(g.axis!=="x"&&n.langDir==="rtl")?" mCS-dir-rtl":"";if(g.setWidth){m.css("width",g.setWidth)}if(g.setHeight){m.css("height",g.setHeight)}g.setLeft=(g.axis!=="y"&&n.langDir==="rtl")?"989999px":g.setLeft;m.addClass(u+" _"+y+"_"+n.idx+F+i).wrapInner("<div id='mCSB_"+n.idx+"' class='mCustomScrollBox mCS-"+g.theme+" "+D+"'><div id='mCSB_"+n.idx+"_container' class='mCSB_container' style='position:relative; top:"+g.setTop+"; left:"+g.setLeft+";' dir="+n.langDir+" /></div>");var h=r("#mCSB_"+n.idx),l=r("#mCSB_"+n.idx+"_container");if(g.axis!=="y"&&!g.advanced.autoExpandHorizontalScroll){l.css("width",s._contentWidth(l.children()))}if(g.scrollbarPosition==="outside"){if(m.css("position")==="static"){m.css("position","relative")}m.css("overflow","visible");h.addClass("mCSB_outside").after(o)}else{h.addClass("mCSB_inside").append(o);l.wrap(C)}s._scrollButtons.call(this);var k=[r("#mCSB_"+n.idx+"_dragger_vertical"),r("#mCSB_"+n.idx+"_dragger_horizontal")];k[0].css("min-height",k[0].height());k[1].css("min-width",k[1].width())},_contentWidth:function(g){return Math.max.apply(Math,g.map(function(){return r(this).outerWidth(true)}).get())},_expandContentHorizontally:function(){var i=r(this),g=i.data(y),h=g.opt,j=r("#mCSB_"+g.idx+"_container");if(h.advanced.autoExpandHorizontalScroll&&h.axis!=="y"){j.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:(Math.ceil(j[0].getBoundingClientRect().right+0.4)-Math.floor(j[0].getBoundingClientRect().left)),position:"relative"}).unwrap()}},_scrollButtons:function(){var i=r(this),g=i.data(y),h=g.opt,k=r(".mCSB_"+g.idx+"_scrollbar:first"),j=["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],l=[(h.axis==="x"?j[2]:j[0]),(h.axis==="x"?j[3]:j[1]),j[2],j[3]];if(h.scrollButtons.enable){k.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])}},_maxHeight:function(){var j=r(this),g=j.data(y),h=g.opt,l=r("#mCSB_"+g.idx),m=j.css("max-height"),k=m.indexOf("%")!==-1,n=j.css("box-sizing");if(m!=="none"){var i=k?j.parent().height()*parseInt(m)/100:parseInt(m);if(n==="border-box"){i-=((j.innerHeight()-j.height())+(j.outerHeight()-j.innerHeight()))}l.css("max-height",Math.round(i))}},_setDraggerLength:function(){var m=r(this),o=m.data(y),i=r("#mCSB_"+o.idx),l=r("#mCSB_"+o.idx+"_container"),j=[r("#mCSB_"+o.idx+"_dragger_vertical"),r("#mCSB_"+o.idx+"_dragger_horizontal")],n=[i.height()/l.outerHeight(false),i.width()/l.outerWidth(false)],h=[parseInt(j[0].css("min-height")),Math.round(n[0]*j[0].parent().height()),parseInt(j[1].css("min-width")),Math.round(n[1]*j[1].parent().width())],g=q&&(h[1]<h[0])?h[0]:h[1],k=q&&(h[3]<h[2])?h[2]:h[3];j[0].css({height:g,"max-height":(j[0].parent().height()-10)}).find(".mCSB_dragger_bar").css({"line-height":h[0]+"px"});j[1].css({width:k,"max-width":(j[1].parent().width()-10)})},_scrollRatio:function(){var i=r(this),g=i.data(y),l=r("#mCSB_"+g.idx),k=r("#mCSB_"+g.idx+"_container"),j=[r("#mCSB_"+g.idx+"_dragger_vertical"),r("#mCSB_"+g.idx+"_dragger_horizontal")],h=[k.outerHeight(false)-l.height(),k.outerWidth(false)-l.width()],m=[h[0]/(j[0].parent().height()-j[0].height()),h[1]/(j[1].parent().width()-j[1].width())];g.scrollRatio={y:m[0],x:m[1]}},_onDragClasses:function(j,h,k){var i=k?"mCSB_dragger_onDrag_expanded":"",l=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag"],g=j.closest(".mCSB_scrollTools");if(h==="active"){j.toggleClass(l[0]+" "+i);g.toggleClass(l[1]);j[0]._draggable=j[0]._draggable?0:1}else{if(!j[0]._draggable){if(h==="hide"){j.removeClass(l[0]);g.removeClass(l[1])}else{j.addClass(l[0]);g.addClass(l[1])}}}},_overflowed:function(){var h=r(this),g=h.data(y),k=r("#mCSB_"+g.idx),i=r("#mCSB_"+g.idx+"_container"),j=g.overflowed==null?i.height():i.outerHeight(false),l=g.overflowed==null?i.width():i.outerWidth(false);return[j>k.height(),l>k.width()]},_resetContentPosition:function(){var i=r(this),g=i.data(y),h=g.opt,l=r("#mCSB_"+g.idx),k=r("#mCSB_"+g.idx+"_container"),j=[r("#mCSB_"+g.idx+"_dragger_vertical"),r("#mCSB_"+g.idx+"_dragger_horizontal")];s._stop(i);if((h.axis!=="x"&&!g.overflowed[0])||(h.axis==="y"&&g.overflowed[0])){j[0].add(k).css("top",0);s._scrollTo(i,"_resetY")}if((h.axis!=="y"&&!g.overflowed[1])||(h.axis==="x"&&g.overflowed[1])){var m=dx=0;if(g.langDir==="rtl"){m=l.width()-k.outerWidth(false);dx=Math.abs(m/g.scrollRatio.x)}k.css("left",m);j[1].css("left",dx);s._scrollTo(i,"_resetX")}},_bindEvents:function(){var i=r(this),g=i.data(y),h=g.opt;if(!g.bindEvents){s._draggable.call(this);if(h.contentTouchScroll){s._contentDraggable.call(this)}if(h.mouseWheel.enable){function j(){k=setTimeout(function(){if(!r.event.special.mousewheel){j()}else{clearTimeout(k);s._mousewheel.call(i[0])}},1000)}var k;j()}s._draggerRail.call(this);s._wrapperScroll.call(this);if(h.advanced.autoScrollOnFocus){s._focus.call(this)}if(h.scrollButtons.enable){s._buttons.call(this)}if(h.keyboard.enable){s._keyboard.call(this)}g.bindEvents=true}},_unbindEvents:function(){var i=r(this),h=i.data(y),l=y+"_"+h.idx,g=".mCSB_"+h.idx+"_scrollbar",j=r("#mCSB_"+h.idx+",#mCSB_"+h.idx+"_container,#mCSB_"+h.idx+"_container_wrapper,"+g+" .mCSB_draggerContainer,#mCSB_"+h.idx+"_dragger_vertical,#mCSB_"+h.idx+"_dragger_horizontal,"+g+">a"),k=r("#mCSB_"+h.idx+"_container");if(h.bindEvents){r(e).unbind("."+l);j.each(function(){r(this).unbind("."+l)});clearTimeout(i[0]._focusTimeout);s._delete.call(null,i[0]._focusTimeout);clearTimeout(h.sequential.step);s._delete.call(null,h.sequential.step);clearTimeout(k[0].onCompleteTimeout);s._delete.call(null,k[0].onCompleteTimeout);h.bindEvents=false}},_scrollbarVisibility:function(m){var j=r(this),h=j.data(y),i=h.opt,n=r("#mCSB_"+h.idx+"_container_wrapper"),l=n.length?n:r("#mCSB_"+h.idx+"_container"),g=[r("#mCSB_"+h.idx+"_scrollbar_vertical"),r("#mCSB_"+h.idx+"_scrollbar_horizontal")],k=[g[0].find(".mCSB_dragger"),g[1].find(".mCSB_dragger")];if(i.axis!=="x"){if(h.overflowed[0]&&!m){g[0].add(k[0]).add(g[0].children("a")).css("display","block");l.removeClass("mCS_no_scrollbar_y mCS_y_hidden")}else{if(i.alwaysShowScrollbar){if(i.alwaysShowScrollbar!==2){k[0].add(g[0].children("a")).css("display","none")}l.removeClass("mCS_y_hidden")}else{g[0].css("display","none");l.addClass("mCS_y_hidden")}l.addClass("mCS_no_scrollbar_y")}}if(i.axis!=="y"){if(h.overflowed[1]&&!m){g[1].add(k[1]).add(g[1].children("a")).css("display","block");l.removeClass("mCS_no_scrollbar_x mCS_x_hidden")}else{if(i.alwaysShowScrollbar){if(i.alwaysShowScrollbar!==2){k[1].add(g[1].children("a")).css("display","none")}l.removeClass("mCS_x_hidden")}else{g[1].css("display","none");l.addClass("mCS_x_hidden")}l.addClass("mCS_no_scrollbar_x")}}if(!h.overflowed[0]&&!h.overflowed[1]){j.addClass("mCS_no_scrollbar")}else{j.removeClass("mCS_no_scrollbar")}},_coordinates:function(h){var i=h.type;switch(i){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[h.originalEvent.pageY,h.originalEvent.pageX];break;case"touchstart":case"touchmove":case"touchend":var g=h.originalEvent.touches[0]||h.originalEvent.changedTouches[0];return[g.pageY,g.pageX];break;default:return[h.pageY,h.pageX]}},_draggable:function(){var B=r(this),D=B.data(y),i=D.opt,g=y+"_"+D.idx,C=["mCSB_"+D.idx+"_dragger_vertical","mCSB_"+D.idx+"_dragger_horizontal"],o=r("#mCSB_"+D.idx+"_container"),n=r("#"+C[0]+",#"+C[1]),j,l,k;n.bind("mousedown."+g+" touchstart."+g+" pointerdown."+g+" MSPointerDown."+g,function(H){H.stopImmediatePropagation();H.preventDefault();if(!s._mouseBtnLeft(H)){return}b=true;if(q){e.onselectstart=function(){return false}}m(false);s._stop(B);j=r(this);var A=j.offset(),z=s._coordinates(H)[0]-A.top,K=s._coordinates(H)[1]-A.left,I=j.height()+A.top,J=j.width()+A.left;if(z<I&&z>0&&K<J&&K>0){l=z;k=K}s._onDragClasses(j,"active",i.autoExpandScrollbar)}).bind("touchmove."+g,function(F){F.stopImmediatePropagation();F.preventDefault();var A=j.offset(),z=s._coordinates(F)[0]-A.top,G=s._coordinates(F)[1]-A.left;h(l,k,z,G)});r(e).bind("mousemove."+g+" pointermove."+g+" MSPointerMove."+g,function(F){if(j){var A=j.offset(),z=s._coordinates(F)[0]-A.top,G=s._coordinates(F)[1]-A.left;if(l===z){return}h(l,k,z,G)}}).add(n).bind("mouseup."+g+" touchend."+g+" pointerup."+g+" MSPointerUp."+g,function(z){if(j){s._onDragClasses(j,"active",i.autoExpandScrollbar);j=null}b=false;if(q){e.onselectstart=null}m(true)});function m(E){var A=o.find("iframe");if(!A.length){return}var z=!E?"none":"auto";A.css("pointer-events",z)}function h(I,H,z,K){o[0].idleTimer=i.scrollInertia<233?250:0;if(j.attr("id")===C[1]){var J="x",A=((j[0].offsetLeft-H)+K)*D.scrollRatio.x}else{var J="y",A=((j[0].offsetTop-I)+z)*D.scrollRatio.y}s._scrollTo(B,A.toString(),{dir:J,drag:true})}},_contentDraggable:function(){var l=r(this),i=l.data(y),n=i.opt,Q=y+"_"+i.idx,P=r("#mCSB_"+i.idx),j=r("#mCSB_"+i.idx+"_container"),N=[r("#mCSB_"+i.idx+"_dragger_vertical"),r("#mCSB_"+i.idx+"_dragger_horizontal")],S,O,h,g,X=[],V=[],o,ab,R,T,k,m,W=0,Z,U=n.axis==="yx"?"none":"all";j.bind("touchstart."+Q+" pointerdown."+Q+" MSPointerDown."+Q,function(A){if(!s._pointerTouch(A)||b){return}var z=j.offset();S=s._coordinates(A)[0]-z.top;O=s._coordinates(A)[1]-z.left}).bind("touchmove."+Q+" pointermove."+Q+" MSPointerMove."+Q,function(E){if(!s._pointerTouch(E)||b){return}E.stopImmediatePropagation();ab=s._getTime();var F=P.offset(),C=s._coordinates(E)[0]-F.top,A=s._coordinates(E)[1]-F.left,D="mcsLinearOut";X.push(C);V.push(A);if(i.overflowed[0]){var G=N[0].parent().height()-N[0].height(),B=((S-C)>0&&(C-S)>-(G*i.scrollRatio.y))}if(i.overflowed[1]){var H=N[1].parent().width()-N[1].width(),z=((O-A)>0&&(A-O)>-(H*i.scrollRatio.x))}if(B||z){E.preventDefault()}m=n.axis==="yx"?[(S-C),(O-A)]:n.axis==="x"?[null,(O-A)]:[(S-C),null];j[0].idleTimer=250;if(i.overflowed[0]){Y(m[0],W,D,"y","all",true)}if(i.overflowed[1]){Y(m[1],W,D,"x",U,true)}});P.bind("touchstart."+Q+" pointerdown."+Q+" MSPointerDown."+Q,function(A){if(!s._pointerTouch(A)||b){return}A.stopImmediatePropagation();s._stop(l);o=s._getTime();var z=P.offset();h=s._coordinates(A)[0]-z.top;g=s._coordinates(A)[1]-z.left;X=[];V=[]}).bind("touchend."+Q+" pointerup."+Q+" MSPointerUp."+Q,function(G){if(!s._pointerTouch(G)||b){return}G.stopImmediatePropagation();R=s._getTime();var I=P.offset(),C=s._coordinates(G)[0]-I.top,A=s._coordinates(G)[1]-I.left;if((R-ab)>30){return}k=1000/(R-o);var F="mcsEaseOut",E=k<2.5,z=E?[X[X.length-2],V[V.length-2]]:[0,0];T=E?[(C-z[0]),(A-z[1])]:[C-h,A-g];var H=[Math.abs(T[0]),Math.abs(T[1])];k=E?[Math.abs(T[0]/4),Math.abs(T[1]/4)]:[k,k];var B=[Math.abs(j[0].offsetTop)-(T[0]*aa((H[0]/k[0]),k[0])),Math.abs(j[0].offsetLeft)-(T[1]*aa((H[1]/k[1]),k[1]))];m=n.axis==="yx"?[B[0],B[1]]:n.axis==="x"?[null,B[1]]:[B[0],null];Z=[(H[0]*4)+n.scrollInertia,(H[1]*4)+n.scrollInertia];var D=parseInt(n.contentTouchScroll)||0;m[0]=H[0]>D?m[0]:0;m[1]=H[1]>D?m[1]:0;if(i.overflowed[0]){Y(m[0],Z[0],F,"y",U,false)}if(i.overflowed[1]){Y(m[1],Z[1],F,"x",U,false)}});function aa(z,B){var A=[B*1.5,B*2,B/1.5,B/2];if(z>90){return B>4?A[0]:A[3]}else{if(z>60){return B>3?A[3]:A[2]}else{if(z>30){return B>8?A[1]:B>6?A[0]:B>4?B:A[2]}else{return B>8?B:A[3]}}}}function Y(C,A,z,D,E,B){if(!C){return}s._scrollTo(l,C.toString(),{dur:A,scrollEasing:z,dir:D,overwrite:E,drag:B})}},_mousewheel:function(){var k=r(this),l=k.data(y);if(l){var i=l.opt,o=y+"_"+l.idx,h=r("#mCSB_"+l.idx),j=[r("#mCSB_"+l.idx+"_dragger_vertical"),r("#mCSB_"+l.idx+"_dragger_horizontal")],n=r("#mCSB_"+l.idx+"_container").find("iframe"),g=h;if(n.length){n.each(function(){var z=this;if(m(z)){g=g.add(r(z).contents().find("body"))}})}g.bind("mousewheel."+o,function(J,P){s._stop(k);if(s._disableMousewheel(k,J.target)){return}var R=i.mouseWheel.deltaFactor!=="auto"?parseInt(i.mouseWheel.deltaFactor):(q&&J.deltaFactor<100)?100:J.deltaFactor||100;if(i.axis==="x"||i.mouseWheel.axis==="x"){var M="x",Q=[Math.round(R*l.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],K=i.mouseWheel.scrollAmount!=="auto"?Q[1]:Q[0]>=h.width()?h.width()*0.9:Q[0],O=Math.abs(r("#mCSB_"+l.idx+"_container")[0].offsetLeft),I=j[1][0].offsetLeft,L=j[1].parent().width()-j[1].width(),N=J.deltaX||J.deltaY||P}else{var M="y",Q=[Math.round(R*l.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],K=i.mouseWheel.scrollAmount!=="auto"?Q[1]:Q[0]>=h.height()?h.height()*0.9:Q[0],O=Math.abs(r("#mCSB_"+l.idx+"_container")[0].offsetTop),I=j[0][0].offsetTop,L=j[0].parent().height()-j[0].height(),N=J.deltaY||P}if((M==="y"&&!l.overflowed[0])||(M==="x"&&!l.overflowed[1])){return}if(i.mouseWheel.invert){N=-N}if(i.mouseWheel.normalizeDelta){N=N<0?-1:1}if((N>0&&I!==0)||(N<0&&I!==L)||i.mouseWheel.preventDefault){J.stopImmediatePropagation();J.preventDefault()}s._scrollTo(k,(O-(N*K)).toString(),{dir:M})})}function m(D){var F=null;try{var E=D.contentDocument||D.contentWindow.document;F=E.body.innerHTML}catch(C){}return(F!==null)}},_disableMousewheel:function(i,g){var k=g.nodeName.toLowerCase(),j=i.data(y).opt.mouseWheel.disableOver,h=["select","textarea"];return r.inArray(k,j)>-1&&!(r.inArray(k,h)>-1&&!r(g).is(":focus"))},_draggerRail:function(){var i=r(this),h=i.data(y),k=y+"_"+h.idx,j=r("#mCSB_"+h.idx+"_container"),g=j.parent(),l=r(".mCSB_"+h.idx+"_scrollbar .mCSB_draggerContainer");l.bind("touchstart."+k+" pointerdown."+k+" MSPointerDown."+k,function(m){b=true}).bind("touchend."+k+" pointerup."+k+" MSPointerUp."+k,function(m){b=false}).bind("click."+k,function(C){if(r(C.target).hasClass("mCSB_draggerContainer")||r(C.target).hasClass("mCSB_draggerRail")){s._stop(i);var o=r(this),D=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!h.overflowed[1]){return}var B="x",n=C.pageX>D.offset().left?-1:1,m=Math.abs(j[0].offsetLeft)-(n*(g.width()*0.9))}else{if(!h.overflowed[0]){return}var B="y",n=C.pageY>D.offset().top?-1:1,m=Math.abs(j[0].offsetTop)-(n*(g.height()*0.9))}s._scrollTo(i,m.toString(),{dir:B,scrollEasing:"mcsEaseInOut"})}})},_focus:function(){var j=r(this),h=j.data(y),i=h.opt,l=y+"_"+h.idx,k=r("#mCSB_"+h.idx+"_container"),g=k.parent();k.bind("focusin."+l,function(m){var n=r(e.activeElement),z=k.find(".mCustomScrollBox").length,o=0;if(!n.is(i.advanced.autoScrollOnFocus)){return}s._stop(j);clearTimeout(j[0]._focusTimeout);j[0]._focusTimer=z?(o+17)*z:0;j[0]._focusTimeout=setTimeout(function(){var F=[n.offset().top-k.offset().top,n.offset().left-k.offset().left],G=[k[0].offsetTop,k[0].offsetLeft],E=[(G[0]+F[0]>=0&&G[0]+F[0]<g.height()-n.outerHeight(false)),(G[1]+F[1]>=0&&G[0]+F[1]<g.width()-n.outerWidth(false))],D=(i.axis==="yx"&&!E[0]&&!E[1])?"none":"all";if(i.axis!=="x"&&!E[0]){s._scrollTo(j,F[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:D,dur:o})}if(i.axis!=="y"&&!E[1]){s._scrollTo(j,F[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:D,dur:o})}},j[0]._focusTimer)})},_wrapperScroll:function(){var i=r(this),h=i.data(y),j=y+"_"+h.idx,g=r("#mCSB_"+h.idx+"_container").parent();g.bind("scroll."+j,function(k){g.scrollTop(0).scrollLeft(0)})},_buttons:function(){var i=r(this),g=i.data(y),h=g.opt,n=g.sequential,l=y+"_"+g.idx,j=r("#mCSB_"+g.idx+"_container"),k=".mCSB_"+g.idx+"_scrollbar",m=r(k+">a");m.bind("mousedown."+l+" touchstart."+l+" pointerdown."+l+" MSPointerDown."+l+" mouseup."+l+" touchend."+l+" pointerup."+l+" MSPointerUp."+l+" mouseout."+l+" pointerout."+l+" MSPointerOut."+l+" click."+l,function(A){A.preventDefault();if(!s._mouseBtnLeft(A)){return}var B=r(this).attr("class");n.type=h.scrollButtons.scrollType;switch(A.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if(n.type==="stepped"){return}b=true;g.tweenRunning=false;o("on",B);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if(n.type==="stepped"){return}b=false;if(n.dir){o("off",B)}break;case"click":if(n.type!=="stepped"||g.tweenRunning){return}o("on",B);break}function o(z,C){n.scrollAmount=h.snapAmount||h.scrollButtons.scrollAmount;s._sequentialScroll.call(this,i,z,C)}})},_keyboard:function(){var m=r(this),n=m.data(y),h=n.opt,j=n.sequential,o=y+"_"+n.idx,g=r("#mCSB_"+n.idx),k=r("#mCSB_"+n.idx+"_container"),i=k.parent(),l="input,textarea,select,datalist,keygen,[contenteditable='true']";g.attr("tabindex","0").bind("blur."+o+" keydown."+o+" keyup."+o,function(H){switch(H.type){case"blur":if(n.tweenRunning&&j.dir){K("off",null)}break;case"keydown":case"keyup":var F=H.keyCode?H.keyCode:H.which,L="on";if((h.axis!=="x"&&(F===38||F===40))||(h.axis!=="y"&&(F===37||F===39))){if(((F===38||F===40)&&!n.overflowed[0])||((F===37||F===39)&&!n.overflowed[1])){return}if(H.type==="keyup"){L="off"}if(!r(e.activeElement).is(l)){H.preventDefault();H.stopImmediatePropagation();K(L,F)}}else{if(F===33||F===34){if(n.overflowed[0]||n.overflowed[1]){H.preventDefault();H.stopImmediatePropagation()}if(H.type==="keyup"){s._stop(m);var J=F===34?-1:1;if(h.axis==="x"||(h.axis==="yx"&&n.overflowed[1]&&!n.overflowed[0])){var I="x",G=Math.abs(k[0].offsetLeft)-(J*(i.width()*0.9))}else{var I="y",G=Math.abs(k[0].offsetTop)-(J*(i.height()*0.9))}s._scrollTo(m,G.toString(),{dir:I,scrollEasing:"mcsEaseInOut"})}}else{if(F===35||F===36){if(!r(e.activeElement).is(l)){if(n.overflowed[0]||n.overflowed[1]){H.preventDefault();H.stopImmediatePropagation()}if(H.type==="keyup"){if(h.axis==="x"||(h.axis==="yx"&&n.overflowed[1]&&!n.overflowed[0])){var I="x",G=F===35?Math.abs(i.width()-k.outerWidth(false)):0}else{var I="y",G=F===35?Math.abs(i.height()-k.outerHeight(false)):0}s._scrollTo(m,G.toString(),{dir:I,scrollEasing:"mcsEaseInOut"})}}}}}break}function K(A,z){j.type=h.keyboard.scrollType;j.scrollAmount=h.snapAmount||h.keyboard.scrollAmount;if(j.type==="stepped"&&n.tweenRunning){return}s._sequentialScroll.call(this,m,A,z)}})},_sequentialScroll:function(g,n,z){var l=g.data(y),h=l.opt,j=l.sequential,k=r("#mCSB_"+l.idx+"_container"),i=j.type==="stepped"?true:false;switch(n){case"on":j.dir=[(z==="mCSB_buttonRight"||z==="mCSB_buttonLeft"||z===39||z===37?"x":"y"),(z==="mCSB_buttonUp"||z==="mCSB_buttonLeft"||z===38||z===37?-1:1)];s._stop(g);if(s._isNumeric(z)&&j.type==="stepped"){return}o(i);break;case"off":m();if(i||(l.tweenRunning&&j.dir)){o(true)}break}function o(O){var T=j.type!=="stepped",P=!O?1000/60:T?h.scrollInertia/1.5:h.scrollInertia,M=!O?2.5:T?7.5:40,Q=[Math.abs(k[0].offsetTop),Math.abs(k[0].offsetLeft)],U=[l.scrollRatio.y>10?10:l.scrollRatio.y,l.scrollRatio.x>10?10:l.scrollRatio.x],L=j.dir[0]==="x"?Q[1]+(j.dir[1]*(U[1]*M)):Q[0]+(j.dir[1]*(U[0]*M)),R=j.dir[0]==="x"?Q[1]+(j.dir[1]*parseInt(j.scrollAmount)):Q[0]+(j.dir[1]*parseInt(j.scrollAmount)),S=j.scrollAmount!=="auto"?R:L,K=!O?"mcsLinear":T?"mcsLinearOut":"mcsEaseInOut",N=!O?false:true;if(O&&P<17){S=j.dir[0]==="x"?Q[1]:Q[0]}s._scrollTo(g,S.toString(),{dir:j.dir[0],scrollEasing:K,dur:P,onComplete:N});if(O){j.dir=false;return}clearTimeout(j.step);j.step=setTimeout(function(){o()},P)}function m(){clearTimeout(j.step);s._stop(g)}},_arr:function(g){var h=r(this).data(y).opt,i=[];if(typeof g==="function"){g=g()}if(!(g instanceof Array)){i[0]=g.y?g.y:g.x||h.axis==="x"?null:g;i[1]=g.x?g.x:g.y||h.axis==="y"?null:g}else{i=g.length>1?[g[0],g[1]]:h.axis==="x"?[null,g[0]]:[g[0],null]}if(typeof i[0]==="function"){i[0]=i[0]()}if(typeof i[1]==="function"){i[1]=i[1]()}return i},_to:function(H,G){if(H==null||typeof H=="undefined"){return}var j=r(this),k=j.data(y),I=k.opt,g=r("#mCSB_"+k.idx+"_container"),h=g.parent(),J=typeof H;if(!G){G=I.axis==="x"?"x":"y"}var i=G==="x"?g.outerWidth(false):g.outerHeight(false),o=G==="x"?g.offset().left:g.offset().top,L=G==="x"?g[0].offsetLeft:g[0].offsetTop,m=G==="x"?"left":"top";switch(J){case"function":return H();break;case"object":if(H.nodeType){var l=G==="x"?r(H).offset().left:r(H).offset().top}else{if(H.jquery){if(!H.length){return}var l=G==="x"?H.offset().left:H.offset().top}}return l-o;break;case"string":case"number":if(s._isNumeric.call(null,H)){return Math.abs(H)}else{if(H.indexOf("%")!==-1){return Math.abs(i*parseInt(H)/100)}else{if(H.indexOf("-=")!==-1){return Math.abs(L-parseInt(H.split("-=")[1]))}else{if(H.indexOf("+=")!==-1){var K=(L+parseInt(H.split("+=")[1]));return K>=0?0:Math.abs(K)}else{if(H.indexOf("px")!==-1&&s._isNumeric.call(null,H.split("px")[0])){return Math.abs(H.split("px")[0])}else{if(H==="top"||H==="left"){return 0}else{if(H==="bottom"){return Math.abs(h.height()-g.outerHeight(false))}else{if(H==="right"){return Math.abs(h.width()-g.outerWidth(false))}else{if(H==="first"||H==="last"){var n=g.find(":"+H),l=G==="x"?r(n).offset().left:r(n).offset().top;return l-o}else{if(r(H).length){var l=G==="x"?r(H).offset().left:r(H).offset().top;return l-o}else{g.css(m,H);w.update.call(null,j[0]);return}}}}}}}}}}break}},_autoUpdate:function(P){var J=r(this),n=J.data(y),g=n.opt,m=r("#mCSB_"+n.idx+"_container");if(P){clearTimeout(m[0].autoUpdate);s._delete.call(null,m[0].autoUpdate);return}var K=m.parent(),R=[r("#mCSB_"+n.idx+"_scrollbar_vertical"),r("#mCSB_"+n.idx+"_scrollbar_horizontal")],L=function(){return[R[0].is(":visible")?R[0].outerHeight(true):0,R[1].is(":visible")?R[1].outerWidth(true):0]},I=h(),i,o=[m.outerHeight(false),m.outerWidth(false),K.height(),K.width(),L()[0],L()[1]],j,O=l(),k;N();function N(){clearTimeout(m[0].autoUpdate);m[0].autoUpdate=setTimeout(function(){if(g.advanced.updateOnSelectorChange){i=h();if(i!==I){M();I=i;return}}if(g.advanced.updateOnContentResize){j=[m.outerHeight(false),m.outerWidth(false),K.height(),K.width(),L()[0],L()[1]];if(j[0]!==o[0]||j[1]!==o[1]||j[2]!==o[2]||j[3]!==o[3]||j[4]!==o[4]||j[5]!==o[5]){M();o=j}}if(g.advanced.updateOnImageLoad){k=l();if(k!==O){m.find("img").each(function(){Q(this.src)});O=k}}if(g.advanced.updateOnSelectorChange||g.advanced.updateOnContentResize||g.advanced.updateOnImageLoad){N()}},60)}function l(){var z=0;if(g.advanced.updateOnImageLoad){z=m.find("img").length}return z}function Q(z){var C=new Image();function A(E,D){return function(){return D.apply(E,arguments)}}function B(){this.onload=null;M()}C.onload=A(C,B);C.src=z}function h(){if(g.advanced.updateOnSelectorChange===true){g.advanced.updateOnSelectorChange="*"}var A=0,z=m.find(g.advanced.updateOnSelectorChange);if(g.advanced.updateOnSelectorChange&&z.length>0){z.each(function(){A+=r(this).height()+r(this).width()})}return A}function M(){clearTimeout(m[0].autoUpdate);w.update.call(null,J[0])}},_snapAmount:function(g,i,h){return(Math.round(g/i)*i-h)},_stop:function(i){var g=i.data(y),h=r("#mCSB_"+g.idx+"_container,#mCSB_"+g.idx+"_container_wrapper,#mCSB_"+g.idx+"_dragger_vertical,#mCSB_"+g.idx+"_dragger_horizontal");h.each(function(){s._stopTween.call(this)})},_scrollTo:function(X,S,P){var l=X.data(y),R=l.opt,T={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:false,dur:R.scrollInertia,overwrite:"all",callbacks:true,onStart:true,onUpdate:true,onComplete:true},P=r.extend(T,P),M=[P.dur,(P.drag?0:P.dur)],N=r("#mCSB_"+l.idx),W=r("#mCSB_"+l.idx+"_container"),h=R.callbacks.onTotalScrollOffset?s._arr.call(X,R.callbacks.onTotalScrollOffset):[0,0],Z=R.callbacks.onTotalScrollBackOffset?s._arr.call(X,R.callbacks.onTotalScrollBackOffset):[0,0];l.trigger=P.trigger;if(S==="_resetY"&&!l.contentReset.y){if(Q("onOverflowYNone")){R.callbacks.onOverflowYNone.call(X[0])}l.contentReset.y=1}if(S==="_resetX"&&!l.contentReset.x){if(Q("onOverflowXNone")){R.callbacks.onOverflowXNone.call(X[0])}l.contentReset.x=1}if(S==="_resetY"||S==="_resetX"){return}if((l.contentReset.y||!X[0].mcs)&&l.overflowed[0]){if(Q("onOverflowY")){R.callbacks.onOverflowY.call(X[0])}l.contentReset.x=null}if((l.contentReset.x||!X[0].mcs)&&l.overflowed[1]){if(Q("onOverflowX")){R.callbacks.onOverflowX.call(X[0])}l.contentReset.x=null}if(R.snapAmount){S=s._snapAmount(S,R.snapAmount,R.snapOffset)}switch(P.dir){case"x":var m=r("#mCSB_"+l.idx+"_dragger_horizontal"),i="left",U=W[0].offsetLeft,o=[N.width()-W.outerWidth(false),m.parent().width()-m.width()],V=[S,S===0?0:(S/l.scrollRatio.x)],g=h[1],k=Z[1],Y=g>0?g/l.scrollRatio.x:0,n=k>0?k/l.scrollRatio.x:0;break;case"y":var m=r("#mCSB_"+l.idx+"_dragger_vertical"),i="top",U=W[0].offsetTop,o=[N.height()-W.outerHeight(false),m.parent().height()-m.height()],V=[S,S===0?0:(S/l.scrollRatio.y)],g=h[0],k=Z[0],Y=g>0?g/l.scrollRatio.y:0,n=k>0?k/l.scrollRatio.y:0;break}if(V[1]<0||(V[0]===0&&V[1]===0)){V=[0,0]}else{if(V[1]>=o[1]){V=[o[0],o[1]]}else{V[0]=-V[0]}}if(!X[0].mcs){O()}clearTimeout(W[0].onCompleteTimeout);if(!l.tweenRunning&&((U===0&&V[0]>=0)||(U===o[0]&&V[0]<=o[0]))){return}s._tweenTo.call(null,m[0],i,Math.round(V[1]),M[1],P.scrollEasing);s._tweenTo.call(null,W[0],i,Math.round(V[0]),M[0],P.scrollEasing,P.overwrite,{onStart:function(){if(P.callbacks&&P.onStart&&!l.tweenRunning){if(Q("onScrollStart")){O();R.callbacks.onScrollStart.call(X[0])}l.tweenRunning=true;s._onDragClasses(m);l.cbOffsets=j()}},onUpdate:function(){if(P.callbacks&&P.onUpdate){if(Q("whileScrolling")){O();R.callbacks.whileScrolling.call(X[0])}}},onComplete:function(){if(P.callbacks&&P.onComplete){if(R.axis==="yx"){clearTimeout(W[0].onCompleteTimeout)}var z=W[0].idleTimer||0;W[0].onCompleteTimeout=setTimeout(function(){if(Q("onScroll")){O();R.callbacks.onScroll.call(X[0])}if(Q("onTotalScroll")&&V[1]>=o[1]-Y&&l.cbOffsets[0]){O();R.callbacks.onTotalScroll.call(X[0])}if(Q("onTotalScrollBack")&&V[1]<=n&&l.cbOffsets[1]){O();R.callbacks.onTotalScrollBack.call(X[0])}l.tweenRunning=false;W[0].idleTimer=0;s._onDragClasses(m,"hide")},z)}}});function Q(z){return l&&R.callbacks[z]&&typeof R.callbacks[z]==="function"}function j(){return[R.callbacks.alwaysTriggerOffsets||U>=o[0]+g,R.callbacks.alwaysTriggerOffsets||U<=-k]}function O(){var A=[W[0].offsetTop,W[0].offsetLeft],z=[m[0].offsetTop,m[0].offsetLeft],C=[W.outerHeight(false),W.outerWidth(false)],B=[N.height(),N.width()];X[0].mcs={content:W,top:A[0],left:A[1],draggerTop:z[0],draggerLeft:z[1],topPct:Math.round((100*Math.abs(A[0]))/(Math.abs(C[0])-B[0])),leftPct:Math.round((100*Math.abs(A[1]))/(Math.abs(C[1])-B[1])),direction:P.dir}}},_tweenTo:function(T,N,R,V,U,P,g){var g=g||{},n=g.onStart||function(){},S=g.onUpdate||function(){},k=g.onComplete||function(){},h=s._getTime(),l,L=0,O=T.offsetTop,M=T.style,X;if(N==="left"){O=T.offsetLeft}var j=R-O;T._mcsstop=0;if(P!=="none"){Q()}W();function i(){if(T._mcsstop){return}if(!L){n.call()}L=s._getTime()-h;o();if(L>=T._mcstime){T._mcstime=(L>T._mcstime)?L+l-(L-T._mcstime):L+l-1;if(T._mcstime<L+1){T._mcstime=L+1}}if(T._mcstime<V){T._mcsid=X(i)}else{k.call()}}function o(){if(V>0){T._mcscurrVal=m(T._mcstime,O,j,V,U);M[N]=Math.round(T._mcscurrVal)+"px"}else{M[N]=R+"px"}S.call()}function W(){l=1000/60;T._mcstime=L+l;X=(!d.requestAnimationFrame)?function(z){o();return setTimeout(z,0.01)}:d.requestAnimationFrame;T._mcsid=X(i)}function Q(){if(T._mcsid==null){return}if(!d.requestAnimationFrame){clearTimeout(T._mcsid)}else{d.cancelAnimationFrame(T._mcsid)}T._mcsid=null}function m(E,F,A,B,D){switch(D){case"linear":case"mcsLinear":return A*E/B+F;break;case"mcsLinearOut":E/=B;E--;return A*Math.sqrt(1-E*E)+F;break;case"easeInOutSmooth":E/=B/2;if(E<1){return A/2*E*E+F}E--;return -A/2*(E*(E-2)-1)+F;break;case"easeInOutStrong":E/=B/2;if(E<1){return A/2*Math.pow(2,10*(E-1))+F}E--;return A/2*(-Math.pow(2,-10*E)+2)+F;break;case"easeInOut":case"mcsEaseInOut":E/=B/2;if(E<1){return A/2*E*E*E+F}E-=2;return A/2*(E*E*E+2)+F;break;case"easeOutSmooth":E/=B;E--;return -A*(E*E*E*E-1)+F;break;case"easeOutStrong":return A*(-Math.pow(2,-10*E/B)+1)+F;break;case"easeOut":case"mcsEaseOut":default:var C=(E/=B)*E,z=C*E;return F+A*(0.499999999999997*z*C+-2.5*C*C+5.5*z+-6.5*C+4*E)}}},_getTime:function(){if(d.performance&&d.performance.now){return d.performance.now()}else{if(d.performance&&d.performance.webkitNow){return d.performance.webkitNow()}else{if(Date.now){return Date.now()}else{return new Date().getTime()}}}},_stopTween:function(){var g=this;if(g._mcsid==null){return}if(!d.requestAnimationFrame){clearTimeout(g._mcsid)}else{d.cancelAnimationFrame(g._mcsid)}g._mcsid=null;g._mcsstop=1},_delete:function(g){try{delete g}catch(h){g=null}},_mouseBtnLeft:function(g){return !(g.which&&g.which!==1)},_pointerTouch:function(g){var h=g.originalEvent.pointerType;return !(h&&h!=="touch"&&h!==2)},_isNumeric:function(g){return !isNaN(parseFloat(g))&&isFinite(g)}};r.fn[u]=function(g){if(w[g]){return w[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return w.init.apply(this,arguments)}else{r.error("Method "+g+" does not exist")}}};r[u]=function(g){if(w[g]){return w[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return w.init.apply(this,arguments)}else{r.error("Method "+g+" does not exist")}}};r[u].defaults=t;d[u]=true;r(d).load(function(){r(c)[u]()})}))}(window,document));(function(g){var f,h;function e(a,b){this.opts=g.extend({handleKeys:true,scrollEventKeys:[32,33,34,35,36,37,38,39,40]},b);this.$container=a;this.$document=g(document);this.lockToScrollPos=[0,0];this.disable()}h=e.prototype;h.disable=function(){var a=this;a.lockToScrollPos=[a.$container.scrollLeft(),a.$container.scrollTop()];a.$container.on("mousewheel.disablescroll DOMMouseScroll.disablescroll touchmove.disablescroll",a._handleWheel);a.$container.on("scroll.disablescroll",function(){a._handleScrollbar.call(a)});if(a.opts.handleKeys){a.$document.on("keydown.disablescroll",function(b){a._handleKeydown.call(a,b)})}};h.undo=function(){var a=this;a.$container.off(".disablescroll");if(a.opts.handleKeys){a.$document.off(".disablescroll")}};h._handleWheel=function(a){a.preventDefault()};h._handleScrollbar=function(){this.$container.scrollLeft(this.lockToScrollPos[0]);this.$container.scrollTop(this.lockToScrollPos[1])};h._handleKeydown=function(a){for(var b=0;b<this.opts.scrollEventKeys.length;b++){if(a.keyCode===this.opts.scrollEventKeys[b]){a.preventDefault();return}}};g.fn.disablescroll=function(a){if(!f&&(typeof a==="object"||!a)){f=new e(this,a)}else{if(f&&f[a]){f[a].call(f)}}};window.UserScrollDisabler=e})(jQuery);String.prototype.trim=function(){var a=String.prototype.trim.arguments[0];if(a){a="^["+a+"]+|["+a+"]+$";var b=new RegExp(a,"gi");var c=this.replace(b,"")}else{var c=this.replace(/^[ ]+|[ ]+$/g,"")}c=c.replace(/^[\r\n]+|[\r\n]+$/g,"");c=c.replace(/^[ ]+|[ ]+$/g,"");return c};String.prototype.tripSpace=function(){return this.replace(/(\s\s+)/g," ")};String.prototype.repeat=function(){var c=String.prototype.repeat.arguments[0];var b="";var a;for(a=0;a<c;a++){b+=this}return b};String.prototype.filter=function(){var c=String.prototype.filter.arguments[0];var b=String.prototype.filter.arguments[1];var d;var e=this;for(var a=0;a<c.length;a++){d=new RegExp(c[a],"gi");e=e.replace(d,b.repeat(c[a].length))}return e};String.prototype.replaceString=function(){var b=String.prototype.replaceString.arguments;var c;var d=this;for(var a=0;a<b.length;a++){c=new RegExp("%s","i");d=d.replace(c,b[a])}return d};String.prototype.stripViet=function(){var replaceChr=String.prototype.stripViet.arguments[0];var stripped_str=this;var viet=[];i=0;viet[i++]=new Array("a","/á|à|ả|ã|ạ|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/g");viet[i++]=new Array("o","/ó|ò|ỏ|õ|ọ|ơ|ớ|ờ|ở|ỡ|ợ|ô|ố|ồ|ổ|ỗ|ộ/g");viet[i++]=new Array("e","/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/g");viet[i++]=new Array("u","/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/g");viet[i++]=new Array("i","/í|ì|ỉ|ĩ|ị/g");viet[i++]=new Array("y","/ý|ỳ|ỷ|ỹ|ỵ/g");viet[i++]=new Array("d","/đ/g");for(var i=0;i<viet.length;i++){stripped_str=stripped_str.replace(eval(viet[i][1]),viet[i][0]);stripped_str=stripped_str.replace(eval(viet[i][1].toUpperCase().replace("G","g")),viet[i][0].toUpperCase())}if(replaceChr){return stripped_str.replace(/[\W]|_/g,replaceChr).replace(/\s/g,replaceChr).replace(/^\-+|\-+$/g,replaceChr)}else{return stripped_str}};var zmp3Img={dynamic:function(a){$($(a).data("selector")).each(function(){$(this).attr("src",$(this).data("src"))});$(a).remove()}};var zmp3Number={format:function(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2}};var zmp3String={substr:function(b,a){if(b.length>a){b=b.substring(0,a);if(b.lastIndexOf(" ")!=-1){b=b.substring(0,b.lastIndexOf(" "))}b+="..."}return b}};function onBlurBind(b,a){$(document).click(function(c){var d=$(b).offset();if(c.pageY<d.top||c.pageY>d.top+$(b).height()||c.pageX<d.left||c.pageX>d.left+$(b).width()){a(c)}})}function isInputNumber(a){return a!==32&&(a<47||((a<58||a>95&&a<106)))}function dynamic(){var d=$(window).scrollTop();var c=d+$(window).height();var a,b;$(".fn-dynamic").each(function(){a=$(this).offset().top;b=a+$(this).height();if((b+200<d)||(a-200<=c)){var e=window[$(this).data("fn")];if(typeof e!="undefined"){e.dynamic.apply(e,[this])}}})}var zmp3DateTime={format:function(v){var r=[[11,"sáng"],[14,"trưa"],[19,"chiều"]],q=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],p=new Date(),l=new Date(v*1000),s=Math.floor(p.getTime()/1000)-v;if(s<60){return(s<0?0:s).toString()+" giây trước"}if(s<3600){return Math.floor(s/60)+" phút trước"}if(s<43200){return Math.floor(s/3600)+" tiếng trước"}var o=l.getHours(),a=this.fill2(l.getMinutes());if(s<518400){var u="tối";for(var n=0;n<3;n++){if(o<r[n][0]){u=r[n][1];break}}s=(p.getDay()+7-l.getDay())%7;var c="";if(s==0){c="hôm nay"}else{if(s==1){c="hôm qua"}else{c=q[l.getDay()]}}return(o%12).toString()+":"+a+" "+u+" "+c}o=this.fill2(o);return o+":"+a+" "+this.fill2(l.getDate())+"/"+this.fill2(l.getMonth()+1)+"/"+l.getFullYear()},fill2:function(a){return a<10?("0"+a):a}};var zmp3Share={url:"",share:function(a){var b=a.attr("href");switch(a.data("net")){case"gp":url="https://plus.google.com/share?url="+b;break;case"zm":url="http://link.apps.zing.vn/share?u="+b;break;default:url="https://www.facebook.com/dialog/share?app_id=1603079626622346&display=popup&caption=mp3.zing.vn&redirect_uri=http://"+location.host+"/link/fb-redirect&href="+b;break}window.open(url,"share","height=600,width=600");return false}};var zmp3Tab={init:function(){if(MP3.ZALO_ID&&!MP3.VIP){var b=$("#tabService");var a=b.data("panel");zmp3SongTool.buildDlBox(b,$(a),function(d){if(d){for(var c in d.data){if(d.data[c].vip){$(".fn-"+c,$(a)).removeClass("ghost-button").click(function(f){if(!MP3.VIP){ZVip.Fpackage($(this).data("step"));return false}});var e=$(".fn-size-"+c,$(a)).parent();e.html(e.html().replace("miễn phí","VIP"))}}if(d.msg){$(".fn-list",$(a)).addClass("none");$(".fn-download-off",$(a)).removeClass("none")}}zmp3Tab.showTab(b)})}$(".fn-tab").click(function(){var d=$(this);var c=d.data("panel");if(c==".fn-tab-panel-addto"){zmp3Login.show(function(){zmp3SongTool.buildPlaylistBox(d,$(c),function(){zmp3Tab.showTab(d)})})}else{if(c==".fn-tab-panel-service"){zmp3SongTool.buildDlBox(d,$(c),function(f){if(f){for(var e in f.data){if(f.data[e].vip){$(".fn-"+e,$(c)).removeClass("ghost-button").click(function(h){if(!MP3.VIP){ZVip.Fpackage($(this).data("step"));return false}});var g=$(".fn-size-"+e,$(c)).parent();g.html(g.html().replace("miễn phí","VIP"))}}if(f.msg){$(".fn-list",$(c)).addClass("none");$(".fn-download-off",$(c)).removeClass("none")}}zmp3Tab.showTab(d)})}else{zmp3Tab.showTab(d)}}return false});$(".fn-closetab").click(function(){zmp3Tab.showTab($($(this).data("tab")));return false})},showTab:function(c){var a=c.data("panel");var b=$('.fn-tab[data-group="'+c.data("group")+'"]');b.removeClass("active");c.parent().siblings().removeClass("active");$(c.data("group")).addClass("none");b.each(function(){$($(this).data("panel")).addClass("none")});if(c.data("show")){$(a).addClass("none");b.data("show",false);c.parent().removeClass("active")}else{b.data("show",false);c.data("show",true);c.parent().addClass("active");c.addClass("active");$(a).removeClass("none")}}};var zmp3ChangePath={clickCb:function(a){location.pathname=$(a).data("path")}};$(document).ready(function(){$(window).load(function(){if($(window).height()>$("body").height()){$("body").addClass("fixed-footer")}else{$("body").removeClass("fixed-footer")}zmp3UI.sidebar();dynamic()});$(window).resize(function(){if($(window).height()>$("body").height()){$("body").addClass("fixed-footer")}else{$("body").removeClass("fixed-footer")}zmp3UI.sidebar();dynamic();zmp3Suggest.resize()});$(document).scroll(function(a){dynamic();zmp3UI.sidebar()});zmp3UI.init();zmp3Login.init();zmp3Suggest.init();zmp3SongTool.init();zmp3User.init();zmp3Tab.init();if($("a.fn-version3").length>0){$("a.fn-version3").attr("href","//v3.mp3.zing.vn"+location.pathname+location.search)}if(!MP3.VIP&&typeof ZVip!="undefined"){$(".fn-viprequire").click(function(a){if(!MP3.VIP){ZVip.Fpackage($(this).data("step"));return false}})}});zmp3User={init:function(){$(".fn-login").click(function(){if(!MP3.ACCOUNT_ID){zmp3Login.show();return false}})},submitCb:function(a){}};function loginCallback(a,b){zmp3Login.process(a,b)}var zmp3SongTool={item:false,init:function(){$(".fn-dlsong").click(function(a){zmp3SongTool.showDlBox($(this));return false});$(".fn-share").click(function(a){zmp3SongTool.showShareBox($(this));return false});$(".fn-add").each(function(){var a=this;if("fav"==$(a).data("from")){$.get("/xhr/mydata/check-exists",$(a).data(),function(b){if(b.exists){$(a).addClass("added").html($(a).html().replace("Thêm vào","Đã thêm"))}})}$(a).click(function(){if(zmp3Login.show()){zmp3SongTool.item=$(this);zmp3SongTool.addPlaylistItem($(this))}return false})});$(".fn-addto").click(function(a){if(zmp3Login.show()){zmp3SongTool.showAddBox($(this))}return false});$(".fn-addfav").click(function(){var c=$($(this).data("item"));if(zmp3Login.show()){var b=$(c).data(),e=parseInt(c.data("added")),a=new Date().getTime(),d=this.item,f=[];if((isNaN(e)||e+800<a)){c.data("added",a);$.post("/xhr/mydata/add-playlist-item",b,function(g){if(g.code<1){c.addClass("added")}zmp3UI.showMsg(g.msg,g.code)})}}return false});$("form.fn-playlist").submit(function(b){var a=this;if(a.name.value.trim().length<1){zmp3UI.showMsg("Vui lòng nhập tên playlist!",1)}else{if(!$(a).attr("disabled")){$(a).attr("disabled",true);this.item_id.value=zmp3SongTool.item.data("id");$.post($(a).attr("action"),$(a).serialize(),function(c){$(a).attr("disabled",false);if(c.code<1){zmp3SongTool.buildPlaylistItem(c.data,$($(a).data("playlist-box")))}zmp3UI.showMsg(c.msg,c.code)})}}return false});$(".fn-rmitem").click(function(){zmp3SongTool.removeItem($($(this).data("item")));return false});onBlurBind("#playlistBox",function(a){if(zmp3SongTool.item){$("#playlistBox").addClass("none");if(zmp3SongTool.item.data("active")){$(".fn-"+zmp3SongTool.item.data("type")).removeClass(zmp3SongTool.item.data("active"))}$(".fn-songbox").addClass("none")}})},showPlaylistBox:function(d,c){var a=$("#playlistBox");var e=this.item.data("pids")?this.item.data("pids").split(","):[];$(".fn-add",a).removeClass("added");$("input",a).prop("checked",false);for(var b in e){if(e[b].length>1){$("input",$("[data-pid="+e[b]+"]",a).addClass("added")).prop("checked",true)}}a.removeClass("none").css("top",d).css("left",c).css("display","block")},addPlaylistItem:function(b){var f=$(b).data(),g=false,j=parseInt(b.data("added")),a=new Date().getTime(),k=this.item,h=[];try{f.id=k.data("id");if(k.data("pids")){h=k.data("pids").split(",")}}catch(d){}for(var c in h){if(h[c]===f.pid){g=true;break}}if(b.hasClass("added")){zmp3SongTool.removeItem($(b.data("item")),function(){b.removeClass("added").html(b.html().replace("Đã thêm","Thêm vào"))},true)}else{if(!g&&(isNaN(j)||j+800<a)){b.data("added",a);$.post("/xhr/mydata/add-playlist-item",f,function(i){if(i.code<1){if($("input",b).length>0){$("input",b).prop("checked",true)}b.addClass("added").html(b.html().replace("Thêm vào","Đã thêm"));h.push(f.pid);try{k.data("pids",h.join(","))}catch(l){}}zmp3UI.showMsg(i.msg,i.code)})}}},removeItem:function(b,f,a){var c=$(b).data(),e=this;var d="Bạn chắc chắn muốn xóa ";if(c.type=="song"){d+="bài hát"}else{if(c.type=="artist"){d+="nghệ sĩ"}else{d+=c.type}}zmp3UI.bodyMask(1);zmp3UI.confirm("Xác nhận",c.name&&!c.pid?d+" <strong>"+c.name+"</strong> ra khỏi danh sách?":d+" này ra khỏi danh sách?",function(g){if(g){if(!c.id||c.id.length<4){c.id=e.item.data("id")}for(var h in c){if(typeof c[h]!=="string"&&typeof c[h]!=="number"){delete (c[h])}}if(!b.data("removed")){b.data("removed",true);$.post("/xhr/mydata/remove-item",c,function(j){if(j.code<1){var i=$(".fn-follow",b.parent());if(i.length>0){i.removeClass("none")}else{i=$(".fn-ufollow",b.parent());if(i.length>0){i.removeClass("none")}else{if(!a){b.remove()}}}}else{b.data("removed",false)}zmp3UI.showMsg(j.msg,j.code);if($.isFunction(f)){f(j)}})}}zmp3UI.bodyMask(0)})},showAddBox:function(b){this.item=$(b.data("item"));var c=$(b).offset();var a=this.item.data("type");c.top+=$(b).height()+8;c.left+=$(b).width()/2;$(".fn-songbox").addClass("none");if(this.item.data("active")){$(".fn-"+a).removeClass(this.item.data("active"));this.item.addClass(this.item.data("active"))}if(a=="song"||a=="playlist"){if(!$(b).data("rendered")){$(".fn-addto").data("rendered",true);this.buildPlaylistBox(this.item,$("#playlistBox"),function(){zmp3SongTool.showPlaylistBox(c.top,c.left)})}else{zmp3SongTool.showPlaylistBox(c.top,c.left)}}},showDlBox:function(b){this.item=$(b.data("item"));var a=this.item.data("type")||"song";var f=b.offset(),e=this.item.data("active");var d="dlbox"+a+this.item.data("id");var c=$("#"+d);$(".fn-"+a).removeClass(e);this.item.addClass(e);$(".fn-box"+a).addClass("none");if(c.length>0){c.css({left:f.left+2-(c.width()/2)+"px",top:f.top+28+"px"}).removeClass("none")}else{c=$(document.getElementById("dlbox"+a).cloneNode(true));c.attr("id",d);$("body").append(c);c.css({left:f.left+2-(c.width()/2)+"px",top:f.top+28+"px"});this.buildDlBox(this.item,c,function(g){if(g.msg){zmp3UI.showMsg(g.msg,1)}c.removeClass("none");if(!MP3.VIP&&typeof ZVip!="undefined"){$(".fn-viprequire",c).click(function(h){if(!MP3.VIP){c.addClass("none");ZVip.Fpackage();return false}})}onBlurBind(zmp3SongTool.item,function(){$(".fn-"+zmp3SongTool.item.data("type")).removeClass(zmp3SongTool.item.data("active"));c.addClass("none")})})}},showShareBox:function(a){this.item=$($(a).data("item"));var d=a.offset();var c="shareSongBox"+this.item.data("id");var b=$("#"+c);$(".fn-"+this.item.data("type")).removeClass(this.item.data("active"));this.item.addClass(this.item.data("active"));$(".fn-songbox").addClass("none");if(b.length>0){b.css("top",d.top+28).css("left",(d.left-80)+(b.width()/2)).removeClass("none")}else{b=$(document.getElementById("shareSongBox").cloneNode(true));b.attr("id",c);$("body").append(b);$(".fn-sharelink",b).attr("href",a.attr("href")).removeClass("none").click(function(){zmp3Share.share($(this));return false});b.css("top",d.top+28).css("left",(d.left-80)+(b.width()/2)).removeClass("none");onBlurBind(zmp3SongTool.item,function(){$(".fn-"+zmp3SongTool.item.data("type")).removeClass(zmp3SongTool.item.data("active"));b.addClass("none")})}},buildDlBox:function(e,b,a){this.item=e;var d=e.data("code");if(d!==b.data("build-dl")){b.data("build-dl",d);var c=e.data("type")||"song";$(".fn-list a",b).each(function(){$(this).parent().addClass("none")});$.get("/xhr/"+c+"/get-download",e.data(),function(g){if(g.data){for(var f in g.data){$(".fn-"+f,b).parent().removeClass("none");$(".fn-size-"+f,b).parent().removeClass("none");$(".fn-"+f,b).attr("href",g.data[f].link);if(g.data[f].size>0){$(".fn-size-"+f,b).html((g.data[f].size/1048576).toFixed(2))}}if(g.qr){$(".fn-qr",b).attr("src","data:image/png;base64,"+g.qr)}}if($.isFunction(a)){a(g)}})}else{if($.isFunction(a)){a()}}},buildPlaylistItem:function(c,a){var b=c.id===0?$(".fn-fav",a)[0].cloneNode(true):$(".fn-item",a)[0].cloneNode(true);$(".fn-name",b).html(c.name);$(".fn-link",b).attr("href",c.link);if($(".fn-total",b).length>0){$(".fn-total",b).html(c.total);if(c.id==0&&c.type=="playlist"){$(".fn-total",b).parent("span").remove()}}$(b).attr("id",c.id);if(c.added){$(".fn-add",b).addClass("added");if($("input",b).length>0){$("input",b).prop("checked",true)}}$(".fn-add",b).attr("data-pid",c.id).attr("data-from","playlist").attr("data-item","#"+c.id+" .fn-add").attr("data-name",c.name).attr("data-type",c.type).attr("data-title",c.name).attr("data-pid",c.id).click(function(d){d.preventDefault();zmp3SongTool.addPlaylistItem($(this));return false});$(b).removeClass("none");$(".fn-list",a).append(b)},buildPlaylistBox:function(c,b,a){this.item=c;if(!b.data("build-playlist")){b.data("build-playlist",1);$.get(MP3.MP3_URL+"/xhr/mydata/get-playlist",c.data(),function(d){if(d.data){for(x in d.data){zmp3SongTool.buildPlaylistItem(d.data[x],b)}if($.isFunction(a)){a()}}})}else{if($.isFunction(a)){a()}}}};var zmp3Login={succCallback:"",error:0,isZalo:false,init:function(){var a=$("#loginBox");$(".fn-zalo",a).click(function(){zmp3Login.isZalo=true;zmp3Login.show();return false});$(".fn-zingid",a).click(function(){zmp3Login.isZalo=false;zmp3Login.show();return false})},show:function(a){this.succCallback=a;if(!MP3.ACCOUNT_NAME){var b=$("#loginBox");if(this.isZalo){$(".fn-zingid",b).removeClass("active");$(this).addClass("active");$(".fn-content",b).html('<iframe src="'+MP3.MP3_URL+'/auth/zalo/access_token" style="border:none;"></iframe>')}else{$(".fn-zalo",b).removeClass("active");$(this).addClass("active");loadScript("http://id.zaloapp.com/open-widget?f=3U9FGM10004");$.get("/xhr/mydata/get-loginbox",function(c){if(c.html){$(".fn-content",b).html(c.html);b.removeClass("none");zmp3UI.bodyMask(1);$("input[name=u]").focus();$("form",b).submit(function(){var e=$("input[name=u]");var d=$("input[name=p]");if(e.val().trim().length<2){zmp3Login.showMsg("Tên đăng nhập không hợp lệ.");e.focus();return false}else{if(d.val().trim().length<2){zmp3Login.showMsg("Vui lòng nhập mật khẩu.");d.focus();return false}}if($("#longtime").prop("checked")){$("#u1").val($("#u1").val()+"&longtime=1");$("#fp").val($("#fp").val()+"&longtime=1")}else{$("#u1").val($("#u1").val()+"&longtime=0");$("#fp").val($("#fp").val()+"&longtime=0")}})}else{if(c.userid){zmp3UI.buildInfo(c)}}},"json")}return false}else{if($.isFunction(this.succCallback)){this.succCallback()}}return true},showMsg:function(a){$("#loginBox").removeClass("none");$("#loginBox .fn-msg").removeClass("none").html(a)},process:function(a,b){this.error=a;if(a!=0){if(a==-114){$.getJSON("http://me.zing.vn/cp?url="+MP3.MP3_URL+"&callback=?",function(){location.href=location.href});setTimeout(function(){location.href=location.href},1000)}else{this.showMsg(b)}}else{zmp3UI.profile(true)}}};var zmp3Suggest={lastQ:"",tplArtist:null,lastcall:0,tplAlbum:null,tplSong:null,tplVideo:null,init:function(){var c=$("#sug");var d=$(".fn-result",c);if(MP3.IS_PC){$('input[name="q"]').focus()}if(location.pathname.search("/tim-kiem/")!=-1){$("form",c).attr("action",location.pathname)}$(window).disablescroll();$(window).disablescroll("undo");var b=new RegExp("q=(.*?)(&|$)");var a=b.exec(location.search);if(a){$("input[name=q]",c).val(decodeURIComponent(decodeURI(a[1]).replace(new RegExp("\\+","g")," ")))}tplArtist=document.getElementById("tplSugArtist").cloneNode(true);tplAlbum=document.getElementById("tplSugAlbum").cloneNode(true);tplSong=document.getElementById("tplSugSong").cloneNode(true);tplVideo=document.getElementById("tplSugVideo").cloneNode(true);d.mCustomScrollbar({scrollInertia:0,scrollbarPosition:"outside",autoHideScrollbar:true,autoExpandScrollbar:true,keyboard:{enable:true},mouseWheel:{preventDefault:true}});this.clearResult();onBlurBind('input[name="q"]',function(){d.addClass("none")});$("form",c).submit(function(){var e=$(".fn-list .fn-item.active",d);if(e.length>0){location.href=$(".fn-link",e).attr("href");return false}if($.trim($('input[name="q"]').val()).length<1){return false}});$('input[name="q"]',c).keydown(function(j){if(j.keyCode===13){var h=$(".fn-list .fn-item.active",d);if(h.length>0){location.href=$(".fn-link",h).attr("href");return false}}else{var g=$(".fn-list .fn-item",d);if((j.keyCode===38||j.keyCode===40)){if(g.length>0){var k=-1;for(var f=0;f<g.length;f++){if($(g[f]).hasClass("active")){k=f;break}}g.removeClass("active");switch(j.keyCode){case 38:(k>0)?$(g[k-1]).addClass("active"):$(g[g.length-1]).addClass("active");break;case 40:(k<g.length-1)?$(g[k+1]).addClass("active"):$(g[0]).addClass("active");break}}return false}else{if(j.keyCode<65&&j.shiftKey||j.keyCode>165&&j.keyCode<200||this.value.length<1&&j.keyCode==32){return false}}}}).keyup(function(f){if(!(f.keyCode<65&&f.shiftKey||f.keyCode>165&&f.keyCode<200||this.value.length<1&&f.keyCode==32)){zmp3Suggest.suggest($(this))}}).focus(function(){zmp3Suggest.suggest($(this))}).click(function(){zmp3Suggest.suggest($(this))});d.height($(window).height()-42)},clearResult:function(){$("#sugResult").data("current",-1);$("#tplSugArtist").remove();$("#tplSugAlbum").remove();$("#tplSugSong").remove();$("#tplSugVideo").remove()},resize:function(){if($("#sugResult ul").first().height()<=$("#sugResult").height()){$("#sugResult").height($("#sugResult ul").first().height())}else{$("#sugResult").height($(window).height()-42)}},suggest:function(b){if(b.val().length>1){var a=$.now();if(this.lastQ!==b.val().trim()&&this.lastcall+50<a){zmp3Suggest.lastQ=b.val().trim();zmp3Suggest.lastcall=a;$.getJSON("http://ac.mp3.zing.vn/complete?type=artist,album,video,song&num=4&callback=?",{query:zmp3Suggest.lastQ},function(c){if(zmp3Suggest.lastQ===b.val().trim()){$("#sugSong .fn-list").empty();$("#sugAlbum .fn-list").empty();$("#sugVideo .fn-list").empty();$("#sugArtist .fn-list").empty();if(c.data){$(tplArtist).data("highlight",b.val());$(tplSong).data("highlight",b.val());$(tplAlbum).data("highlight",b.val());$(tplVideo).data("highlight",b.val());if(c.data[0].artist.length>0){for(x in c.data[0].artist){var e=c.data[0].artist[x];var f=tplArtist.cloneNode(true);var d="/nghe-si/"+(e.name_stripviet?e.name_stripviet:e.name.stripViet("-"));$(".fn-name",f).addClass("fn-highlight").data("highlight",b.val()).html(e.name);$("a.fn-link",f).attr("title",e.name).attr("href",d);$("img.fn-thumb",f).attr("src","http://image.mp3.zdn.vn/thumb/94_94/"+e.thumb).attr("alt",e.name);$(f).removeClass("none");$("#sugArtist .fn-list").append(f)}$("#sugArtist").removeClass("none")}else{$("#sugArtist").addClass("none")}if(c.data[1].album.length>0){for(x in c.data[1].album){var e=c.data[1].album[x];var f=tplAlbum.cloneNode(true);$(".fn-name",f).addClass("fn-highlight").data("highlight",b.val()).html(e.name);$(".fn-artist",f).addClass("fn-highlight").data("highlight",b.val()).html(e.artist);$("a.fn-link",f).attr("title",e.name+" - "+e.artist).attr("href","/album/"+e.name.stripViet("-")+"-"+e.artist.stripViet("-")+"/"+e.id+".html");$("img.fn-thumb",f).attr("src","http://image.mp3.zdn.vn/thumb/94_94/"+e.thumb).attr("alt",e.name);$(f).removeClass("none");$("#sugAlbum .fn-list").append(f)}$("#sugAlbum").removeClass("none")}else{$("#sugAlbum").addClass("none")}if(c.data[2].video.length>0){for(x in c.data[2].video){var e=c.data[2].video[x];var f=tplVideo.cloneNode(true);$(".fn-name",f).addClass("fn-highlight").data("highlight",b.val()).html(e.name);$(".fn-artist",f).addClass("fn-highlight").data("highlight",b.val()).html(e.artist);$("a.fn-link",f).attr("title",e.name+" - "+e.artist).attr("href","/video-clip/"+e.name.stripViet("-")+"-"+e.artist.stripViet("-")+"/"+e.id+".html");$("img.fn-thumb",f).attr("src","http://image.mp3.zdn.vn/thumb/128_72/"+e.thumb).attr("alt",e.name);$(f).removeClass("none");$("#sugVideo .fn-list").append(f)}$("#sugVideo").removeClass("none")}else{$("#sugVideo").addClass("none")}if(c.data[3].song.length>0){for(x in c.data[3].song){var e=c.data[3].song[x];var f=tplSong.cloneNode(true);$(".fn-name",f).addClass("fn-highlight").data("highlight",b.val()).html(e.name);$(".fn-artist",f).addClass("fn-highlight").data("highlight",b.val()).html(e.artist);$("a.fn-link",f).attr("title",e.name+" - "+e.artist).attr("href","/bai-hat/"+e.name.stripViet("-")+"-"+e.artist.stripViet("-")+"/"+e.id+".html");$(f).removeClass("none");$("#sugSong .fn-list").append(f)}$("#sugSong").removeClass("none")}else{$("#sugSong").addClass("none")}$("#sugResult").removeClass("none");zmp3UI.highlight()}}zmp3Suggest.resize()})}else{$("#sugResult").removeClass("none");zmp3Suggest.resize()}}else{this.clearResult()}}};var ZMEInfo={size:120,uid:[],elId:[],listId:[],listUname:[],renderZMEAvatar:function(){var a=$(".fn_zme_info");for(var d=0;d<a.length;d++){var e=$(a[d]);if(e.attr("data_uid")){var c=parseInt(e.attr("data_uid"));if(c>0){var f=e.data("ref")?e.data("ref"):".fn_zme_info[data_uid="+e.attr("data_uid")+"]";this.listId.push(e.attr("data_uid")+"?"+f)}}else{if(e.attr("data_uname")){if(e.attr("data_uname").length>2){var f=e.data("ref")?e.data("ref"):".fn_zme_info[data_uname='"+e.attr("data_uname")+"']";this.listUname.push(e.attr("data_uname")+"?"+f)}}}if(e.data("thumbsize")){this.size=parseInt(e.data("thumbsize"))}}if(this.listId.length||this.listUname.length){var b="http://widget.me.zing.vn/api/widget?method=getMixEx&size="+this.size+"&displaylist=&displaylist_ex=&ava_list="+this.listUname.join("|,")+"&ava_list_id="+this.listId.join("|,");loadScript(b);this.listId=[];this.listUname=[]}}};function fA(b,a,l,e){var f=$(b);if(f.length){for(var g=0;g<f.length;g++){var c=$(f[g]);var h=$(c.data("thumb"));var j=$(c.data("link"));var k=$(c.data("dname"));var d="http://me.zing.vn/u/";if(h.length){h.each(function(){if(this.tagName=="IMG"){$(this).attr("src",a).attr("alt",e)}})}if(j.length){j.each(function(){if(this.tagName=="A"){$(this).attr("href",d+l).attr("title",e)}})}if(k.length){k.each(function(){$(this).html(e);if(this.tagName=="A"){$(this).attr("href",d+l).attr("title",e)}})}}c.remove()}}var zmp3UI={init:function(){this.profile();this.followInit();$(".fn-tooltip").click(function(){if(!$(this).data("show")){$($(this).data("box")).removeClass("none");$(this).data("show",true)}else{$($(this).data("box")).addClass("none");$(this).data("show",false)}false});$(".fn-show").length>0&&$(".fn-show").click(function(){zmp3UI.showhide($($(this).data("box")));return false});$(".fn-showhere").length>0&&$(".fn-showhere").click(function(){var i=$(this).offset();var h=i.top,g=$($(this).data("box")).removeClass("none");if(h+g.height()+20>$(window).height()+$(window).scrollTop()){h-=g.height()+12}else{h+=$(this).height()}g.css({top:h+"px",left:i.left+6-g.width()/2+"px"});if(!$(this).data("show")){$(this).data("show",true)}else{$($(this).data("box")).addClass("none");$(this).data("show",false)}return false});$(".fn-showhide").length>0&&$(".fn-showhide").click(function(){$($(this).data("show")).removeClass("none");$($(this).data("hide")).addClass("none");return false});if($(".fn-cb").length){$(".fn-cb").click(function(){var g=window[$(this).data("fn")];if(typeof g!="undefined"){g.clickCb.apply(g,[this])}return false})}$(".fn-expand").each(function(){var h=$($(this).data("box"));var g=parseInt(h.data("min"));if(g>=h[0].scrollHeight){h.css("height","auto");$(this).remove()}});$(".fn-expand").click(function(){var g=$($(this).data("box"));if(!g.data("expand")){$(this).data("top",$(window).scrollTop());g.css("height",g.data("max"));g.data("expand",1);$(this).html("Rút gọn")}else{g.css("height",g.data("min"));g.data("expand",0);$(this).html("Xem thêm");$(window).scrollTop($(this).data("top"))}return false});$(".fn-number").each(function(){$(this).html(zmp3Number.format($(this).html()))});$(".fn-date").each(function(){$(this).html(zmp3DateTime.format($(this).html()))});$(".fn-scrollbar").mCustomScrollbar({scrollInertia:0,scrollbarPosition:"outside",autoHideScrollbar:true,autoExpandScrollbar:true,mouseWheel:{preventDefault:true}});$(".fn-sharelink").click(function(){zmp3Share.share($(this));return false});$("form.fn-ajax").submit(function(){var g="undefined";if($(this).data("cb")){var g=window[$(this).data("cb")]}$.post($(this).attr("action"),$(this).serialize(),function(h){if(typeof g!="undefined"){g.submitCb.apply(g,[h,this])}});return false});$(".fn-close").click(function(){var g=window[$(this).data("cb")];if(typeof g!="undefined"){g.closeCb.apply(g,[this])}zmp3UI.bodyMask(0);$($(this).data("box")).addClass("none");return false});$(".fn-param").click(function(){location.href=zmp3UI.replaceUrlParam($(this));return false});var b=$(".fn-bar");var f=0;for(var d=0;d<b.length;d++){var e=$(b[d]);var c=parseInt(e.data("total"));if(!isNaN(c)&&f<c){f=c}}for(var d=0;d<b.length;d++){var e=$(b[d]);var c=parseInt(e.data("total"));if(!isNaN(c)){c=100*c/f;if(c<95){c+=4}e.css("width",c+"%")}}zmp3Toolbar.init();ZMEInfo.renderZMEAvatar();$(".fn-time").each(function(){$(this).html(zmp3DateTime.format($(this).html()))});if(location.host.search("lt.mp3.zing.vn")===-1){(function(j,g,k){var i,h=j.getElementsByTagName(g)[0];if(j.getElementById(k)){return}i=j.createElement(g);i.id=k;i.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1603079626622346&version=v2.0";h.parentNode.insertBefore(i,h)}(document,"script","facebook-jssdk"))}this.highlight();$(".fn-banner-off").click(function(){if(MP3.VIP){zmp3UI.setBannerOff(!MP3.BANNER_OFF)}else{if(typeof ZVip!="undefined"){ZVip.Fpackage()}}return false});$(".fn-total-play").each(function(){if($(this).data("id")){var g=this;$.get("/xhr/song/get-total-play",$(this).data(),function(h){if(h.total_play>=0){$(g).html(zmp3Number.format(h.total_play))}})}});$(".fn-slide-show").each(function(){var i=this;var g={dots:false,prevArrow:$(".fn-prev",this),nextArrow:$(".fn-next",this),infinite:true,speed:1500,slidesToShow:6,slidesToScroll:6};if($(this).data()!==null){$.extend(g,g,$(this).data())}if($(this).data("customNav")!==null){var h=$($(this).data("customNav"));$(".fn-slide",this).slick(g).on("beforeChange",function(m,k,j,l){h.removeClass("active");$(h[(l/g.slidesToShow)]).addClass("active")});$(h[0]).addClass("active");h.click(function(){$(".fn-slide",i).slick("slickGoTo",$(this).data("ord"));return false})}else{$(".fn-slide",this).slick(g)}});$("a[tracking]").click(function(){return zmp3Common.trackingOn($(this),"/tracking")});var a=new Date().getHours();if(a>18&&a<21){$(".fn-ytsubscribe").removeClass("none")}},bodyMask:function(a){if(a){$(".body-mask").removeClass("none")}else{$(".body-mask").addClass("none")}},showmodal:function(a){this.showhide($($(a).data("box")),function(b){zmp3UI.bodyMask(b)});return false},showhide:function(b,a){if(b.hasClass("none")){b.css("display","none");b.removeClass("none")}b.slideToggle(200,function(){if($.isFunction(a)){a(false)}})},highlight:function(){var d=$(".fn-highlight");if(d.length){for(var b=0;b<d.length;b++){var c=$(d[b]);if(c.data("highlight")){var e=c.html().split("/");var a=this.matchMaker(e.length>1?e[1].trim():e[0],c.data("highlight").stripViet().toLowerCase());if(a){c.html((e.length>1?e[0]+"/ ":"")+a)}}}d.removeClass("fn-highlight")}},matchMaker:function(c,b){var a=c.stripViet().toLowerCase();var d=a.indexOf(b);if(d>-1){return c.substr(0,d)+'<strong class="mark">'+c.substr(d,b.length)+"</strong>"+c.substr(d+b.length,c.length)}return false},replaceUrlParam:function(b){var c,d,a=b.attr("href"),f=b.data("param"),e=b.data("value");if(!a||a.length<10){a=location.href}if(b.data("op")=="remove"){c=new RegExp("(\\&|\\?)"+f+"="+e);d=a.replace(c,"$1").replace("&&","&").replace(new RegExp("\\&$"),"&")}else{if(b.data("op")=="add"){c=new RegExp("(\\&|\\?)"+f+"="+e);if(!c.test(a)){d=a+(a.indexOf("?")>-1?"&":"?")+f+"="+e}}else{var c=new RegExp("(\\&|\\?)("+f+"=).*?(&|$)");if(c.test(a)){d=e&&e.length>0?a.replace(c,"$1$2"+e+"$3"):a.replace(c,"$3")}else{if(typeof e!=="undefined"){d=a+(a.indexOf("?")?"&":"?")+f+"="+e}}if(d===a){d=d+(d.indexOf("?")>0?"&":"?")+f+"="+e}}}return d},setBannerOff:function(a){MP3.BANNER_OFF=a;$.cookie("BANNER_OFF",MP3.BANNER_OFF?1:0,{path:"/",domain:"zing.vn"});if(MP3.BANNER_OFF){$("._bannerAds").remove();$(".fn-banner-off").removeClass("active").each(function(){$(this).html($(this).html().replace("Tắt","Bật"))});if(typeof zmp3Player!="undefined"&&typeof zmp3Player.player!="undefined"&&typeof zmp3Player.player.removeTextAd!="undefined"){zmp3Player.player.removeTextAd()}}else{location.reload()}},showMsg:function(e,b,c){b=b==0?"success":"error";if(!c){c=5000}var a=$("#msgBox .fn-item")[0].cloneNode(true);$("#msgBox").append(a);$(a).removeAttr("id").addClass(b).removeClass("none");$(".fn-content",a).html(e);setTimeout(function(){$(a).fadeOut("slow",function(){$(a).remove()})},c)},confirm:function(c,b,d){var a=$("#confirmBox .fn-item")[0].cloneNode(true);$("#confirmBox").append(a);$(a).removeAttr("id").removeClass("none");$(".fn-title",a).html(c);$(".fn-content",a).html(b);$(".fn-ok",a).click(function(){$(a).remove();if($.isFunction(d)){d(true)}return false});$(".fn-close",a).click(function(){$(a).remove();if($.isFunction(d)){d(false)}return false})},sidebar:function(){var b=$(".fn-sidebar-fixed");if(b.length>0){var e=$(window).scrollTop(),d=0;var h=$(window).height();var f=$(".quick-link").height();var k=b.siblings("div").offset().top;if(e<k+f){b.css("margin-top",e>20?20-e:e+"px")}else{b.css("margin-top",20-k+"px");if($("footer").offset().top-e<h){d=$("footer").height()+20+f}}var g=$(".fn-scrollbar",b);for(var j=0;j<g.length;j++){var c=$(g[j]);var a=d+c.offset().top-e;c.height(h-a-30+"px")}}},buildItem:function(f,c,d){var g=(d?d:"song")+c.id;$(f).attr("id",g).data("id",c.id).data("code",c.code||0).removeClass("none");$(".fn-link",f).attr("href",c.link).attr("title",c.name+" - "+c.artist);$(".fn-name",f).html(c.name);if(c.video_link){$(".fn-video_link",f).attr("href",c.video_link).attr("title","Xem MV "+c.name+" - "+c.artist)}else{$(".fn-video_link",f).remove()}var b=$(".fn-artist",f);$(".fn-artist_list",f).empty();for(var a in c.artist_list){var e=b[0].cloneNode(true);$(e).empty().append('<a href="'+c.artist_list[a].link+'" title="'+(c.artist_list.length<2?c.artist:c.artist_list[a].name)+'">'+c.artist_list[a].name+"</a>");$(".fn-artist_list",f).append(e);if(parseInt(a)<c.artist_list.length-1){$(".fn-artist_list",f).append("<span>, </span>")}}$(".fn-thumb",f).attr("src",MP3.IMG_URL+c.thumb);if($(".fn-addto",f).length){$(".fn-dlsong",f).data("item","#"+g);$(".fn-addto",f).data("item","#"+g);$(".fn-share",f).data("item","#"+g).attr("href",MP3.MP3_URL+c.link)}return f},getContentWidth:function(){return $(".wrap-body .wrap-content").width()},followInit:function(){var e=$(".fn-followed");if(e.length>0){var c=[],b=[],d=[];for(var a=0;a<e.length;a++){if($(e[a]).data("id")){c.push($(e[a]).data("id"))}else{if($(e[a]).data("rid")){b.push($(e[a]).data("rid"))}else{if($(e[a]).data("uid")){d.push($(e[a]).data("uid"))}}}}$.get("/xhr/artist/get-follow",{ids:c.join(","),rids:b.join(","),uids:d.join(",")},function(f){if(f.data){for(var h=0;h<e.length;h++){var j=$(e[h]).data("id")||$(e[h]).data("rid")||$(e[h]).data("uid");var g=f.data[j];if(g>=0){$(e[h]).html(zmp3Number.format(g))}}}});if(MP3.ACCOUNT_ID){$.get("/xhr/mydata/get-favartist",function(f){if(f.data){for(var g=0;g<f.data.length;g++){var h=$(".fn-follow[data-id="+f.data[g].id+"]");if(h.length>0){var j=$(".fn-rmitem",h.parent());if(j.length>0){h.addClass("none");j.removeClass("none")}else{h.addClass("active")}}}}})}$(".fn-follow").click(function(){var f=$(this);zmp3Login.show(function(){var g=$(".fn-followed[data-id="+f.data("id")+"]");if(f.hasClass("active")){zmp3SongTool.removeItem(f,function(h){f.removeClass("active");var i=parseInt(g.html());if(i>0){g.html(i-1)}})}else{$.post("/xhr/mydata/follow",f.data(),function(h){if(h.data){f.addClass("active");$(".fn-followed[data-id="+f.data("id")+"]").html(h.data.total);var i=$(".fn-rmitem",f.parent());if(i.length>0){f.addClass("none");i.removeClass("none")}else{f.addClass("active")}}})}});return false})}this.ufollowInit()},ufollowInit:function(){var e=$(".fn-ufollowed");if(e.length>0){var c=[],b=[],d=[];for(var a=0;a<e.length;a++){if($(e[a]).data("id")){c.push($(e[a]).data("id"))}}$.get("/xhr/follow/get-ufollow-num",{ids:c.join(",")},function(f){if(f.data){for(var h=0;h<e.length;h++){var j=$(e[h]).data("id");var g=f.data[j];if(g>=0){$(e[h]).html(g)}}}});if(MP3.ACCOUNT_ID){$.get("/xhr/mydata/get-ufollow-list",function(f){if(f.data){for(var g=0;g<f.data.length;g++){var h=$(".fn-ufollow[data-id="+f.data[g].id+"]");if(h.length>0){var j=$(".fn-rmitem",h.parent());if(j.length>0){h.addClass("none");j.removeClass("none")}else{h.addClass("active")}}}}})}$(".fn-ufollow").click(function(){var f=$(this);zmp3Login.show(function(){var g=$(".fn-ufollowed[data-id="+f.data("id")+"]");if(f.hasClass("active")){zmp3SongTool.removeItem(f,function(h){f.removeClass("active");var i=parseInt(g.html());if(i>0){g.html(i-1)}})}else{$.post("/xhr/mydata/follow",f.data(),function(h){if(h.data){f.addClass("active");$(".fn-ufollowed[data-id="+f.data("id")+"]").html(h.data.total);var i=$(".fn-rmitem",f.parent());if(i.length>0){f.addClass("none");i.removeClass("none")}else{f.addClass("active")}}})}});return false})}},showHide:function(a){if(a.hasClass("none")){a.removeClass("none")}else{a.addClass("none")}},profile:function(a){$.get("/xhr/mydata/get-profile",{is_login:a?1:0},function(b){zmp3UI.buildInfo(b,a)},"json")},buildInfo:function(c,b){if(c.userid||c.zaloid){MP3.ACCOUNT_NAME=c.username;MP3.ACCOUNT_ID=c.userid;MP3.DISPLAY_NAME=c.name;$("a.fn-my-channel").attr("href",$("a.fn-my-channel").attr("href")+c.zalousername);$("#userBox a.fn-profile").attr("href","http://me.zing.vn/u/"+c.username);$("#userBox a.fn-logout").attr("href",c.logout);$(".fn-userbox").removeClass("none");$(".fn-guestbox").remove();$("#loginBox").remove();zmp3UI.bodyMask(0);$("#userBox").append('<i class="fn_zme_info" style="display: none;" data_uid="'+c.userid+'" data-thumb="#userBox .fn-thumb" data-thumbsize="120"></i>');if(c.is_vip){if($.cookie("BANNER_OFF")==null||b){zmp3UI.setBannerOff(true)}MP3.VIP=1;$(".fn-vip").removeClass("none");$(".fn-notvip").addClass("none");if(c.noti_flag){zmp3UI.bodyMask(1);$("#loginNotiBox .fn-dname").html(c.name);$("#loginNotiBox").removeClass("none")}}else{$(".fn-vip").addClass("none");$(".fn-notvip").removeClass("none");MP3.VIP=0}if(c.is_mod){MP3.MOD=1;$(".fn-mod").removeClass("none")}ZMEInfo.renderZMEAvatar();if(b&&$.isFunction(zmp3Login.succCallback)){zmp3Login.succCallback()}}else{$(".fn-guestbox").removeClass("none");$(".fn-userbox").addClass("none");$(".fn-vip").addClass("none");$(".fn-notvip").removeClass("none");if(b){$.getJSON("http://me.zing.vn/cp?url="+MP3.MP3_URL+"&callback=?",function(){location.href=location.href});setTimeout(function(){location.href=location.href},1000)}else{if(typeof $.cookie("__vngauth")!="undefined"){var a=parseInt($.cookie("__vngauth"));if(!isNaN(a)&&a<2){$.cookie("__vngauth",a+1);location.href="http://id.mp3.zing.vn/zingsession?type=ss&f=3U9FGM10004&cbUrl="+encodeURIComponent(location.href)}}}}}};var zmp3Storage={getParam:function(a,b){if(typeof localStorage!=="undefined"&&localStorage.getItem(a)!=null){return localStorage.getItem(a)}return b},setParam:function(b,a){if(typeof localStorage!=="undefined"){return localStorage.setItem(b,a)}return null}};var zmp3Comment={timer:null,delay:0,type:"",id:"",tpl:null,dynamic:function(b){var a=$(b).data();$(b).remove();if(a.id&&a.type){this.init(a.id,a.type)}},remove:function(a){$.post(MP3.INTER_URL+"/comment/remove?callback=?",{oid:this.id,cid:a.data("id"),type:this.type},function(b){a.remove();zmp3UI.showMsg(b.note,b.is_error?1:0)},"json")},pagination:function(c){c.removeClass("none");var d=parseInt(0.999+(c.data("total")));var f=parseInt(c.data("page"));var e,a=5;$(".fn-page",c).addClass("none");if(f<d){$(".fn-last",c).removeClass("none").data("page",d);$(".fn-next",c).removeClass("none").data("page",f+1)}else{f=d}if(f>1){a=f>2?f+2:f+3;$(".fn-first",c).removeClass("none").data("page",1);$(".fn-prev",c).removeClass("none").data("page",f-1)}e=f-2;if(d<a){e-=(a-d);a=d}if(e<1){e=1}for(var b=1;b<=5&e<=a;b++,e++){$(".fn-page"+b,c).removeClass("none");if(e==f){$(".fn-page"+b,c).addClass("active").data("page",e).html(e)}else{$(".fn-page"+b,c).removeClass("active").data("page",e).html(e)}}},init:function(b,a){this.id=b;this.type=a;tpl=document.getElementById("tplComment").cloneNode(true);$(tpl).removeClass("none");$("#tplComment").remove();$("#pagination .fn-page").click(function(){if(!$(this).hasClass("active")){zmp3Comment.load($(this).data("page"))}return false});$("form.fn-comment").submit(function(){zmp3Comment.add(this);return false});this.load(1)},load:function(c,b){var a="#commentList .fn-page";if(b){if($(a+c).length>0){$(a+c).remove()}}if($(a+c).length>0){$(a).addClass("none");$(a+c).removeClass("none");$("#pagination").data("page",c);this.pagination($("#pagination"))}else{$.getJSON(MP3.INTER_URL+"/comment/get-list?callback=?",{op:"get",type:this.type,id:this.id.toUpperCase(),page:c,length:10},function(d){$("#commentCounter").html(d.total);if(d.data){zmp3Comment.build(c,d)}})}},build:function(e,a){$("#commentList .fn-page").addClass("none");for(var c in a.data){var f=tpl.cloneNode(true);var d=a.data[c];var b="zmp3"+d.commentId;$(f).attr("id",b).data("id",d.commentId);$(f).addClass("fn-page fn-page"+e);$(".fn-content",f).html(d.content);$(".fn-time",f).html(zmp3DateTime.format(d.time));$(".fn-delete",f).data("item","#"+b).click(function(){zmp3Comment.remove($($(this).data("item")));return false});$(f).append('<i class="fn_zme_info fn'+d.ownerId+'" style="display: none;" data-ref=".fn'+d.ownerId+'" data_uid="'+d.ownerId+'" data-thumb="#'+b+' .fn-thumb" data-dname="#'+b+' .fn-dname" data-link="#'+b+' .fn-link"></i>');$("#commentList").append(f)}if(a.total>10){if(a.total>200){a.total=200}$("#pagination").data("total",a.total/10).data("page",e);this.pagination($("#pagination"))}ZMEInfo.renderZMEAvatar()},add:function(b){if(this.delay>0){return false}if(zmp3Login.show()){var a=b.content.value;a=a.trim();b.content.value=a;if(a===b.content.defaultValue){zmp3UI.showMsg("Bạn cần nhập nội dung bình luận.",1)}else{if(a.length<50){zmp3UI.showMsg("Nội dung bình luận cần ít nhất 50 ký tự.",1)}else{if(a.length>900){zmp3UI.showMsg("Nội dung bình luận chỉ cho phép tối đa 900 ký tự.",1)}else{if(!zmp3Comment.loading){zmp3Comment.loading=true;$.post(MP3.INTER_URL+"/comment/add-v4?callback=?",$(b).serialize(),function(c){zmp3Comment.loading=false;if(!c.is_error){if(c.data&&c.data.length>0){zmp3Comment.build(1,c)}b.content.value="";zmp3Comment.countdown(b)}zmp3UI.showMsg(c.msg,c.is_error?1:0);zmp3Comment.charsCounter(b)},"json")}}}}}},charsCounter:function(b){var a=b.content.value.length;if(a>0&&b.content.value.charCodeAt(a-1)===32){a--}},countdown:function(a){this.delay=15;$(a).addClass("disabled");$(a.btnSubmit).html("Vui lòng chờ 15 giây");this.timer=setInterval(function(){if(zmp3Comment.delay>0){$(a.btnSubmit).html("Vui lòng chờ "+zmp3Comment.delay+" giây");zmp3Comment.delay--}else{$(a).removeClass("disabled");$(a.btnSubmit).html("Bình luận");clearInterval(zmp3Comment.timer)}},1000)}};var zmp3Toolbar={init:function(){if($(window).width()>1300){var b=$("#toolbar");$(".fn-toolbar",b).click(function(){var c=this;zmp3Login.show(function(){if($(c).hasClass("active")){$("#toolbar .fn-box").addClass("none");$(".fn-toolbar",b).removeClass("active");zmp3UI.bodyMask(0)}else{zmp3UI.bodyMask(1);$(".fn-toolbar",b).removeClass("active");$(c).addClass("active");switch($(c).data("box")){case"playlist":zmp3Toolbar.playlistbox();break;case"fav":zmp3Toolbar.favbox();break;case"his":zmp3Toolbar.hisbox();break;case"follow":zmp3Toolbar.followbox();break}}});return false});$(".fn-box[data-box=fav] .fn-group",b).click(function(){zmp3Toolbar.favbox($(this).data("group"));$(".fn-group",b).removeClass("active");$(this).addClass("active");return false});$(".fn-box[data-box=follow] .fn-group",b).click(function(){zmp3Toolbar.followbox($(this).data("group"));$(".fn-group",b).removeClass("active");$(this).addClass("active");return false});$("#toolbar .fn-box").each(function(){var c=this;onBlurBind(this,function(){var d=$("#toolbar .fn-toolbar[data-box="+$(c).data("box")+"]");if(d.hasClass("active")){d.removeClass("active");zmp3UI.bodyMask(0)}$(c).addClass("none")})});var a=$(".box-scroll",b);if(a.length>0){a.css("max-height",$(window).height()-80+"px");a.mCustomScrollbar({scrollInertia:0,scrollbarPosition:"outside",autoHideScrollbar:true,autoExpandScrollbar:true,mouseWheel:{preventDefault:true}})}}},playlistbox:function(){var b=$("#toolbar");var a=$(".fn-box[data-box=playlist]");zmp3Login.show(function(){var c=$(".fn-list",a);if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/xhr/mydata/get-playlist",function(d){if(d.data){var e=$(".fn-item",c)[0].cloneNode(true);for(x in d.data){var g=d.data[x];if(g.id.length>2){var f=e.cloneNode(true);$(".fn-name",f).html(g.name);if(g.artist){$(".fn-artist",f).html(g.artist.length>60?"Nhiều nghệ sĩ":g.artist)}$(".fn-link",f).attr("href",MP3.MP3_URL+g.link);$(".fn-edit-link",f).attr("href",g.edit_link);$(".fn-thumb",f).attr("src",MP3.IMG_URL+g.thumb).attr("alt",g.name);if($(".fn-play",f).length>0){$(".fn-play",f).html(g.play)}$(f).removeClass("none");c.append(f)}}$(".fn-total",a).html(d.total)}})}});$(".fn-box",b).addClass("none");a.removeClass("none")},favbox:function(d){if(!d){d="song"}var b=$("#toolbar");var a=$(".fn-box[data-box=fav]",b);var c=$(".fn-list[data-group="+d+"]",a);zmp3Login.show(function(){if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/xhr/mydata/get-fav"+d,function(e){if(e.data){var f=$(".fn-item",c)[0].cloneNode(true);for(x in e.data){var h=e.data[x];if(h.id.length>2){var g=f.cloneNode(true);$(".fn-name",g).html(h.name);if(h.artist){$(".fn-artist",g).html(h.artist.length>60?"Nhiều nghệ sĩ":h.artist)}$(".fn-link",g).attr("href",MP3.MP3_URL+h.link);$(".fn-thumb",g).attr("src",MP3.IMG_URL+h.thumb).attr("alt",h.name);$(g).removeClass("none");c.append(g)}}}})}});$(".fn-list",a).addClass("none");$(".fn-box",b).addClass("none");a.removeClass("none");c.removeClass("none")},followbox:function(d){if(!d){d="artist"}var b=$("#toolbar");var a=$(".fn-box[data-box=follow]",b);var c=$(".fn-list[data-group="+d+"]",a);zmp3Login.show(function(){if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/xhr/mydata/get-follow-list?type="+d,function(e){if(e.data){var f=$(".fn-item",c)[0].cloneNode(true);for(x in e.data){var i=e.data[x];if(i.id.length>2){var g=f.cloneNode(true);var h=d+"follow"+i.id;$(g).attr("id",h);$(".fn-name",g).html(i.name);$(".fn-link",g).attr("href",MP3.MP3_URL+i.link);$(".fn-thumb",g).attr("src",MP3.IMG_URL+i.thumb).attr("alt",i.name);$(".fn-total",g).html(zmp3Number.format(i.total));$(g).data("type",d).data("id",i.id).data("name",i.name);$(".fn-remove",g).data("item","#"+h).click(function(){zmp3SongTool.removeItem($($(this).data("item")));return false});$(g).removeClass("none");c.append(g)}}}})}});$(".fn-list",a).addClass("none");$(".fn-box",b).addClass("none");a.removeClass("none");c.removeClass("none")},hisbox:function(d){if(!d){d="play"}var b=$("#toolbar");var a=$(".fn-box[data-box=his]",b);var c=$(".fn-list[data-group="+d+"]",a);zmp3Login.show(function(){if(!c.data("time")){c.data("time",new Date().getTime());$.get(MP3.MP3_URL+"/xhr/mydata/get-history",{start:0,length:20},function(e){if(e.data){var f=$(".fn-item",c)[0].cloneNode(true);for(x in e.data){var k=e.data[x];if(k.id.length>2){var i=f.cloneNode(true);var g=k.type;var h="history"+k.id+k.time;$(i).attr("id",h).data(k).data("from","history");$(".fn-name",i).html(k.name);$(".fn-artist",i).html(k.artist.length>60?"Nhiều nghệ sĩ":k.artist);var j=k.artist;$(".fn-"+k.type,i).removeClass("none");switch(k.type){case"video":g="video-clip";break;case"playlist":j=k.username;break;case"song":g="bai-hat";break}$(".fn-link",i).attr("title",k.name+" - "+k.artist).attr("href",MP3.MP3_URL+"/"+g+"/"+k.name.stripViet("-")+"-"+j.stripViet("-")+"/"+k.id+".html");$(".fn-thumb",i).attr("src",MP3.IMG_URL+k.thumb).attr("alt",k.name);$(".fn-remove",i).data("item","#"+h).click(function(){var m=$($(this).data("item"));var l=m.data("order");zmp3SongTool.removeItem(m,function(o){if(o.code<1){var q=c.children(".fn-item");for(var p=0;p<q.length;p++){var n=$(q[p]).data("order");if(l<n){$(q[p]).data("order",n-1)}}}});return false});$(i).removeClass("none");c.append(i)}}}})}});$(".fn-list",a).addClass("none");$(".fn-box",b).addClass("none");a.removeClass("none");c.removeClass("none")}};var zmp3Common={trackPageview:function(a){if(typeof ga!="undefined"){ga("send","pageview",a)}if(typeof ZA!="undefined"){ZA.trackPageview(a)}},tracking:function(a){if(typeof ga!="undefined"){ga("mp3.send","pageview",a)}},trackingOn:function(c,e,d){if(!e){e=""}var b=c.attr("suglog");var a=c.attr("href");if(a){var f=c.attr("tracking");if(a.search(MP3.MP3_URL)!=-1){a="/"+a.replace(MP3.MP3_URL,"")}if(f){a+="?"+f}zmp3Common.tracking(e+a)}if(b){$.get(MP3.LOG_URL+b);if(!(d&&(d.ctrlKey||d.button>0))){setTimeout(function(){location.href=c.attr("href")},400)}return false}return true}};var zmp3FeedBack={url:"/xhr/feed-back",flVer:"",frm:"",init:function(){$("._feedBackBtn").click(function(a){zmp3FeedBack.displayForm();return false})},displayForm:function(){if(zmp3Login.show(zmp3FeedBack.displayForm)){}},hOk:function(a){},post:function(c,d,b,a){if(zmp3FeedBack.flVer.length<1){zmp3FeedBack.flVer=Browser.getFlashVersion();zmp3FeedBack.post(c,d,b,a)}else{$.post(zmp3FeedBack.url,{subject:c,content:d,link:b,flVer:zmp3FeedBack.flVer,browser:navigator.userAgent},function(e){return a(e)},"json")}}};var zmp3BlockChart={dynamic:function(b){var a=$(b).data();$(b).remove();this.load(a);this.init()},init:function(){$(".fn-chart").click(function(){if(!$(this).hasClass("active")){var a=$(this).data();zmp3BlockChart.load(a)}return false})},load:function(b){var f=b.group?b.group:"_chart_"+b.type;var e=$("#"+f+b.id);$('.fn-chart[data-group="'+b.group+'"]').removeClass("active");var c=$('.fn-chart[data-id="'+b.id+'"]').addClass("active");$("a.fn-detail_link."+f+b.id).attr("href",c.attr("href")).attr("title",c.attr("title"));if($(".fn-item",e).length>0&&$(".fn-item",e).length<4){var a=$(".fn-item",e)[0].cloneNode(true);var d=$(".fn-first",e)[0].cloneNode(true);$(".fn-item",e).remove();$(".fn-first",e).remove();$.getJSON("/xhr/charts",{op:"get",type:b.type,id:b.id},function(h){if(h.data){for(var k in h.data){k=parseInt(k);var n=k===0?d.cloneNode(true):a.cloneNode(true);var l=h.data[k];var o="chartitem"+b.type+l.id;$(n).attr("id",o).data("id",l.id).data("code",l.code).data("type",b.type).removeClass("none");var j=$(".fn-artist",n);$(".fn-artist_list",n).empty();for(var g in l.artist_list){var m=j[0].cloneNode(true);$(m).empty().append('<a href="'+l.artist_list[g].link+'" title="'+(l.artist_list.length<2?l.artist:l.artist_list[g].name)+'">'+l.artist_list[g].name+"</a>");$(".fn-artist_list",n).append(m);if(parseInt(g)<l.artist_list.length-1){$(".fn-artist_list",n).append("<span>, </span>")}}$(".fn-order",n).addClass("rank-"+l.order).html(l.order);$(".fn-link",n).attr("href",MP3.MP3_URL+l.link).attr("title",l.name+" - "+l.artist);$(".fn-name",n).html(l.name);if($(".fn-score",n).length){$(".fn-score",n).html(zmp3Number.format(l.score))}if($(".fn-addto",n).length){$(".fn-dlsong",n).data("item","#"+o);$(".fn-addto",n).data("item","#"+o);$(".fn-share",n).data("item","#"+o).attr("href",MP3.MP3_URL+l.link)}if($(".fn-thumb",n).length){if(k===0){l.thumb=l.thumb.replace(/thumb\/\d+_\d+/,"")}$(".fn-thumb",n).attr("src",MP3.IMG_URL+l.thumb)}$(".fn-list",e).append(n)}$("."+f).addClass("none");$("."+f+b.id).removeClass("none");zmp3SongTool.init();if(h.play_link){$("a.fn-play_link."+f+b.id).attr("href",h.play_link)}}})}else{$("."+f).addClass("none");$("."+f+b.id).removeClass("none")}}};var loginNoti={closeCb:function(){$.post("/xhr/mydata/update-noti-flag")}};var z3Log={timer:null,urlLog1:MP3.LOG_URL+"log/index",urlLog2:MP3.LOG_URL+"log/mp3log",urlLog4:MP3.LOG_URL+"logv4/mp3log",start:function(c,a,b){if(this.timer!==null){clearTimeout(this.timer)}this.data=this.data4="";$.get("/xhr/log/info",{id:c,type:a},function(d){if(d.data&&d.data4){$.getJSON(MP3.LOG_URL+"log/index?sessid="+$.cookie("__mp3sessid")+"&callback=?");$.getJSON(MP3.LOG_URL+"logv4/mp3log?sessid="+$.cookie("__mp3sessid")+"&callback=?");z3Log.timer=setTimeout(function(){$.getJSON(MP3.LOG_URL+"log/mp3log?sessid="+$.cookie("__mp3sessid")+"&data="+d.data+"&callback=?");$.getJSON(MP3.LOG_URL+"logv4/mp3log?sessid="+$.cookie("__mp3sessid")+"&data="+d.data4+"&callback=?")},3500)}})},writeLog:function(a){if(a){$.getJSON(this.urlLog1+"?sessid="+$.cookie("__mp3sessid")+"&callback=?","","dataType:text")}},writeLogInfo:function(b,a){if(!a){a=this.urlLog2}if(b){$.getJSON(a+"?sessid="+$.cookie("__mp3sessid")+"&data="+b+"&callback=?","","dataType:text")}},getUid:function(){return"xxxxxxxxxxxx".replace(/[x]/g,function(d){var b=Math.random()*16|0,a=d=="x"?b:(b&3|8);return a.toString(16)}).toUpperCase()}};if(typeof $.cookie("__mp3sessid")=="undefined"){$.cookie("__mp3sessid",z3Log.getUid(),{domain:"mp3.zing.vn",path:"/"})}if(MP3.LOG_INFO){var type=0,fromId="",fromBox=0;var delay=0;var referrer=document.referrer;var pattern=/[a-z0-9-]+\//gi;if(referrer&&referrer.indexOf(MP3.MP3_URL)>-1){referrer=referrer.replace(MP3.MP3_URL,"");if(referrer.indexOf("/")==0){referrer=referrer.substr(1)}referrer=referrer.substr(0,referrer.indexOf("."));arr=referrer.split("/");fromId=referrer.replace(pattern,"");switch(true){case (referrer.indexOf("bai-hat")==0):type=1;break;case (referrer.indexOf("video-clip")==0):type=3;break;case (referrer.indexOf("album")==0):case (referrer.indexOf("playlist")==0):type=2;break;default:break}}var lastPos=location.pathname.lastIndexOf("/");var arrPiece=location.pathname.substring(1,lastPos).toLowerCase().split("/").slice(0,2);path=arrPiece.join("/");switch(arrPiece[0]){case"bai-hat":case"album":case"video-clip":case"playlist":delay=35000;break;default:delay=0;break}MP3.LOG_INFO+="&fromId="+fromId+"&type="+type+"&fromBox="+fromBox;if(delay>0){z3Log.writeLog(MP3.LOG_INFO);setTimeout("z3Log.writeLogInfo(MP3.LOG_INFO)",delay);setTimeout("z3Log.writeLogInfo(MP3.LOG_INFO4, z3Log.urlLog4)",delay)}else{z3Log.writeLogInfo(MP3.LOG_INFO)}};